(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function _n(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ae={},Yt=[],rt=()=>{},Gi=()=>!1,vr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),wn=t=>t.startsWith("onUpdate:"),Te=Object.assign,Sn=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},wa=Object.prototype.hasOwnProperty,se=(t,e)=>wa.call(t,e),F=Array.isArray,Xt=t=>Ds(t)==="[object Map]",br=t=>Ds(t)==="[object Set]",Wn=t=>Ds(t)==="[object Date]",G=t=>typeof t=="function",ge=t=>typeof t=="string",nt=t=>typeof t=="symbol",ie=t=>t!==null&&typeof t=="object",Ji=t=>(ie(t)||G(t))&&G(t.then)&&G(t.catch),Yi=Object.prototype.toString,Ds=t=>Yi.call(t),Sa=t=>Ds(t).slice(8,-1),Xi=t=>Ds(t)==="[object Object]",xn=t=>ge(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gs=_n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yr=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},xa=/-\w/g,xt=yr(t=>t.replace(xa,e=>e.slice(1).toUpperCase())),Ea=/\B([A-Z])/g,Tt=yr(t=>t.replace(Ea,"-$1").toLowerCase()),Qi=yr(t=>t.charAt(0).toUpperCase()+t.slice(1)),$r=yr(t=>t?`on${Qi(t)}`:""),St=(t,e)=>!Object.is(t,e),Zs=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Zi=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},_r=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Hn;const wr=()=>Hn||(Hn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function En(t){if(F(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=ge(r)?Aa(r):En(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(ge(t)||ie(t))return t}const Ta=/;(?![^(]*\))/g,ka=/:([^]+)/,Oa=/\/\*[^]*?\*\//g;function Aa(t){const e={};return t.replace(Oa,"").split(Ta).forEach(s=>{if(s){const r=s.split(ka);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Re(t){let e="";if(ge(t))e=t;else if(F(t))for(let s=0;s<t.length;s++){const r=Re(t[s]);r&&(e+=r+" ")}else if(ie(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Ra="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ca=_n(Ra);function eo(t){return!!t||t===""}function Pa(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=Ls(t[r],e[r]);return s}function Ls(t,e){if(t===e)return!0;let s=Wn(t),r=Wn(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=nt(t),r=nt(e),s||r)return t===e;if(s=F(t),r=F(e),s||r)return s&&r?Pa(t,e):!1;if(s=ie(t),r=ie(e),s||r){if(!s||!r)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ls(t[o],e[o]))return!1}}return String(t)===String(e)}function Ia(t,e){return t.findIndex(s=>Ls(s,e))}const to=t=>!!(t&&t.__v_isRef===!0),ne=t=>ge(t)?t:t==null?"":F(t)||ie(t)&&(t.toString===Yi||!G(t.toString))?to(t)?ne(t.value):JSON.stringify(t,so,2):String(t),so=(t,e)=>to(e)?so(t,e.value):Xt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[jr(r,i)+" =>"]=n,s),{})}:br(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>jr(s))}:nt(e)?jr(e):ie(e)&&!F(e)&&!Xi(e)?String(e):e,jr=(t,e="")=>{var s;return nt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};let Ue;class $a{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=Ue,!e&&Ue&&(this.index=(Ue.scopes||(Ue.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ue;try{return Ue=this,e()}finally{Ue=s}}}on(){++this._on===1&&(this.prevScope=Ue,Ue=this)}off(){this._on>0&&--this._on===0&&(Ue=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function ja(){return Ue}let de;const Ur=new WeakSet;class ro{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ue&&Ue.active&&Ue.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ur.has(this)&&(Ur.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||io(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zn(this),oo(this);const e=de,s=Je;de=this,Je=!0;try{return this.fn()}finally{ao(this),de=e,Je=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)On(e);this.deps=this.depsTail=void 0,zn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ur.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yr(this)&&this.run()}get dirty(){return Yr(this)}}let no=0,ms,vs;function io(t,e=!1){if(t.flags|=8,e){t.next=vs,vs=t;return}t.next=ms,ms=t}function Tn(){no++}function kn(){if(--no>0)return;if(vs){let e=vs;for(vs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;ms;){let e=ms;for(ms=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function oo(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ao(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),On(r),Ua(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function Yr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(lo(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function lo(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ts)||(t.globalVersion=Ts,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Yr(t))))return;t.flags|=2;const e=t.dep,s=de,r=Je;de=t,Je=!0;try{oo(t);const n=t.fn(t._value);(e.version===0||St(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{de=s,Je=r,ao(t),t.flags&=-3}}function On(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)On(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ua(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Je=!0;const co=[];function ft(){co.push(Je),Je=!1}function pt(){const t=co.pop();Je=t===void 0?!0:t}function zn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=de;de=void 0;try{e()}finally{de=s}}}let Ts=0;class Na{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class An{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!de||!Je||de===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==de)s=this.activeLink=new Na(de,this),de.deps?(s.prevDep=de.depsTail,de.depsTail.nextDep=s,de.depsTail=s):de.deps=de.depsTail=s,uo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=de.depsTail,s.nextDep=void 0,de.depsTail.nextDep=s,de.depsTail=s,de.deps===s&&(de.deps=r)}return s}trigger(e){this.version++,Ts++,this.notify(e)}notify(e){Tn();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{kn()}}}function uo(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)uo(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Xr=new WeakMap,Nt=Symbol(""),Qr=Symbol(""),ks=Symbol("");function xe(t,e,s){if(Je&&de){let r=Xr.get(t);r||Xr.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new An),n.map=r,n.key=s),n.track()}}function dt(t,e,s,r,n,i){const o=Xr.get(t);if(!o){Ts++;return}const a=l=>{l&&l.trigger()};if(Tn(),e==="clear")o.forEach(a);else{const l=F(t),c=l&&xn(s);if(l&&s==="length"){const u=Number(r);o.forEach((d,h)=>{(h==="length"||h===ks||!nt(h)&&h>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(ks)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Nt)),Xt(t)&&a(o.get(Qr)));break;case"delete":l||(a(o.get(Nt)),Xt(t)&&a(o.get(Qr)));break;case"set":Xt(t)&&a(o.get(Nt));break}}kn()}function Lt(t){const e=te(t);return e===t?e:(xe(e,"iterate",ks),Fe(t)?e:e.map(Ye))}function Sr(t){return xe(t=te(t),"iterate",ks),t}function bt(t,e){return gt(t)?ss(Dt(t)?Ye(e):e):Ye(e)}const Da={__proto__:null,[Symbol.iterator](){return Nr(this,Symbol.iterator,t=>bt(this,t))},concat(...t){return Lt(this).concat(...t.map(e=>F(e)?Lt(e):e))},entries(){return Nr(this,"entries",t=>(t[1]=bt(this,t[1]),t))},every(t,e){return at(this,"every",t,e,void 0,arguments)},filter(t,e){return at(this,"filter",t,e,s=>s.map(r=>bt(this,r)),arguments)},find(t,e){return at(this,"find",t,e,s=>bt(this,s),arguments)},findIndex(t,e){return at(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return at(this,"findLast",t,e,s=>bt(this,s),arguments)},findLastIndex(t,e){return at(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return at(this,"forEach",t,e,void 0,arguments)},includes(...t){return Dr(this,"includes",t)},indexOf(...t){return Dr(this,"indexOf",t)},join(t){return Lt(this).join(t)},lastIndexOf(...t){return Dr(this,"lastIndexOf",t)},map(t,e){return at(this,"map",t,e,void 0,arguments)},pop(){return cs(this,"pop")},push(...t){return cs(this,"push",t)},reduce(t,...e){return Gn(this,"reduce",t,e)},reduceRight(t,...e){return Gn(this,"reduceRight",t,e)},shift(){return cs(this,"shift")},some(t,e){return at(this,"some",t,e,void 0,arguments)},splice(...t){return cs(this,"splice",t)},toReversed(){return Lt(this).toReversed()},toSorted(t){return Lt(this).toSorted(t)},toSpliced(...t){return Lt(this).toSpliced(...t)},unshift(...t){return cs(this,"unshift",t)},values(){return Nr(this,"values",t=>bt(this,t))}};function Nr(t,e,s){const r=Sr(t),n=r[e]();return r!==t&&!Fe(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.done||(i.value=s(i.value)),i}),n}const La=Array.prototype;function at(t,e,s,r,n,i){const o=Sr(t),a=o!==t&&!Fe(t),l=o[e];if(l!==La[e]){const d=l.apply(t,i);return a?Ye(d):d}let c=s;o!==t&&(a?c=function(d,h){return s.call(this,bt(t,d),h,t)}:s.length>2&&(c=function(d,h){return s.call(this,d,h,t)}));const u=l.call(o,c,r);return a&&n?n(u):u}function Gn(t,e,s,r){const n=Sr(t);let i=s;return n!==t&&(Fe(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,bt(t,a),l,t)}),n[e](i,...r)}function Dr(t,e,s){const r=te(t);xe(r,"iterate",ks);const n=r[e](...s);return(n===-1||n===!1)&&In(s[0])?(s[0]=te(s[0]),r[e](...s)):n}function cs(t,e,s=[]){ft(),Tn();const r=te(t)[e].apply(t,s);return kn(),pt(),r}const Ba=_n("__proto__,__v_isRef,__isVue"),ho=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(nt));function Ma(t){nt(t)||(t=String(t));const e=te(this);return xe(e,"has",t),e.hasOwnProperty(t)}class fo{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?Ya:vo:i?mo:go).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=F(e);if(!n){let l;if(o&&(l=Da[s]))return l;if(s==="hasOwnProperty")return Ma}const a=Reflect.get(e,s,Ee(e)?e:r);if((nt(s)?ho.has(s):Ba(s))||(n||xe(e,"get",s),i))return a;if(Ee(a)){const l=o&&xn(s)?a:a.value;return n&&ie(l)?en(l):l}return ie(a)?n?en(a):Cn(a):a}}class po extends fo{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];const o=F(e)&&xn(s);if(!this._isShallow){const c=gt(i);if(!Fe(r)&&!gt(r)&&(i=te(i),r=te(r)),!o&&Ee(i)&&!Ee(r))return c||(i.value=r),!0}const a=o?Number(s)<e.length:se(e,s),l=Reflect.set(e,s,r,Ee(e)?e:n);return e===te(n)&&(a?St(r,i)&&dt(e,"set",s,r):dt(e,"add",s,r)),l}deleteProperty(e,s){const r=se(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&dt(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!nt(s)||!ho.has(s))&&xe(e,"has",s),r}ownKeys(e){return xe(e,"iterate",F(e)?"length":Nt),Reflect.ownKeys(e)}}class qa extends fo{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Fa=new po,Ka=new qa,Va=new po(!0);const Zr=t=>t,Ks=t=>Reflect.getPrototypeOf(t);function Wa(t,e,s){return function(...r){const n=this.__v_raw,i=te(n),o=Xt(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=n[t](...r),u=s?Zr:e?ss:Ye;return!e&&xe(i,"iterate",l?Qr:Nt),Te(Object.create(c),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}}})}}function Vs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ha(t,e){const s={get(n){const i=this.__v_raw,o=te(i),a=te(n);t||(St(n,a)&&xe(o,"get",n),xe(o,"get",a));const{has:l}=Ks(o),c=e?Zr:t?ss:Ye;if(l.call(o,n))return c(i.get(n));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&xe(te(n),"iterate",Nt),n.size},has(n){const i=this.__v_raw,o=te(i),a=te(n);return t||(St(n,a)&&xe(o,"has",n),xe(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=te(a),c=e?Zr:t?ss:Ye;return!t&&xe(l,"iterate",Nt),a.forEach((u,d)=>n.call(i,c(u),c(d),o))}};return Te(s,t?{add:Vs("add"),set:Vs("set"),delete:Vs("delete"),clear:Vs("clear")}:{add(n){!e&&!Fe(n)&&!gt(n)&&(n=te(n));const i=te(this);return Ks(i).has.call(i,n)||(i.add(n),dt(i,"add",n,n)),this},set(n,i){!e&&!Fe(i)&&!gt(i)&&(i=te(i));const o=te(this),{has:a,get:l}=Ks(o);let c=a.call(o,n);c||(n=te(n),c=a.call(o,n));const u=l.call(o,n);return o.set(n,i),c?St(i,u)&&dt(o,"set",n,i):dt(o,"add",n,i),this},delete(n){const i=te(this),{has:o,get:a}=Ks(i);let l=o.call(i,n);l||(n=te(n),l=o.call(i,n)),a&&a.call(i,n);const c=i.delete(n);return l&&dt(i,"delete",n,void 0),c},clear(){const n=te(this),i=n.size!==0,o=n.clear();return i&&dt(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Wa(n,t,e)}),s}function Rn(t,e){const s=Ha(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(se(s,n)&&n in r?s:r,n,i)}const za={get:Rn(!1,!1)},Ga={get:Rn(!1,!0)},Ja={get:Rn(!0,!1)};const go=new WeakMap,mo=new WeakMap,vo=new WeakMap,Ya=new WeakMap;function Xa(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qa(t){return t.__v_skip||!Object.isExtensible(t)?0:Xa(Sa(t))}function Cn(t){return gt(t)?t:Pn(t,!1,Fa,za,go)}function Za(t){return Pn(t,!1,Va,Ga,mo)}function en(t){return Pn(t,!0,Ka,Ja,vo)}function Pn(t,e,s,r,n){if(!ie(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Qa(t);if(i===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,i===2?r:s);return n.set(t,a),a}function Dt(t){return gt(t)?Dt(t.__v_raw):!!(t&&t.__v_isReactive)}function gt(t){return!!(t&&t.__v_isReadonly)}function Fe(t){return!!(t&&t.__v_isShallow)}function In(t){return t?!!t.__v_raw:!1}function te(t){const e=t&&t.__v_raw;return e?te(e):t}function el(t){return!se(t,"__v_skip")&&Object.isExtensible(t)&&Zi(t,"__v_skip",!0),t}const Ye=t=>ie(t)?Cn(t):t,ss=t=>ie(t)?en(t):t;function Ee(t){return t?t.__v_isRef===!0:!1}function Q(t){return tl(t,!1)}function tl(t,e){return Ee(t)?t:new sl(t,e)}class sl{constructor(e,s){this.dep=new An,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:te(e),this._value=s?e:Ye(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||Fe(e)||gt(e);e=r?e:te(e),St(e,s)&&(this._rawValue=e,this._value=r?e:Ye(e),this.dep.trigger())}}function bo(t){return Ee(t)?t.value:t}const rl={get:(t,e,s)=>e==="__v_raw"?t:bo(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return Ee(n)&&!Ee(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function yo(t){return Dt(t)?t:new Proxy(t,rl)}class nl{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new An(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ts-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&de!==this)return io(this,!0),!0}get value(){const e=this.dep.track();return lo(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function il(t,e,s=!1){let r,n;return G(t)?r=t:(r=t.get,n=t.set),new nl(r,n,s)}const Ws={},ir=new WeakMap;let Ct;function ol(t,e=!1,s=Ct){if(s){let r=ir.get(s);r||ir.set(s,r=[]),r.push(t)}}function al(t,e,s=ae){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,c=R=>n?R:Fe(R)||n===!1||n===0?ht(R,1):ht(R);let u,d,h,p,v=!1,b=!1;if(Ee(t)?(d=()=>t.value,v=Fe(t)):Dt(t)?(d=()=>c(t),v=!0):F(t)?(b=!0,v=t.some(R=>Dt(R)||Fe(R)),d=()=>t.map(R=>{if(Ee(R))return R.value;if(Dt(R))return c(R);if(G(R))return l?l(R,2):R()})):G(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){ft();try{h()}finally{pt()}}const R=Ct;Ct=u;try{return l?l(t,3,[p]):t(p)}finally{Ct=R}}:d=rt,e&&n){const R=d,H=n===!0?1/0:n;d=()=>ht(R(),H)}const w=ja(),A=()=>{u.stop(),w&&w.active&&Sn(w.effects,u)};if(i&&e){const R=e;e=(...H)=>{R(...H),A()}}let O=b?new Array(t.length).fill(Ws):Ws;const x=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(e){const H=u.run();if(n||v||(b?H.some((K,J)=>St(K,O[J])):St(H,O))){h&&h();const K=Ct;Ct=u;try{const J=[H,O===Ws?void 0:b&&O[0]===Ws?[]:O,p];O=H,l?l(e,3,J):e(...J)}finally{Ct=K}}}else u.run()};return a&&a(x),u=new ro(d),u.scheduler=o?()=>o(x,!1):x,p=R=>ol(R,!1,u),h=u.onStop=()=>{const R=ir.get(u);if(R){if(l)l(R,4);else for(const H of R)H();ir.delete(u)}},e?r?x(!0):O=u.run():o?o(x.bind(null,!0),!0):u.run(),A.pause=u.pause.bind(u),A.resume=u.resume.bind(u),A.stop=A,A}function ht(t,e=1/0,s){if(e<=0||!ie(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Ee(t))ht(t.value,e,s);else if(F(t))for(let r=0;r<t.length;r++)ht(t[r],e,s);else if(br(t)||Xt(t))t.forEach(r=>{ht(r,e,s)});else if(Xi(t)){for(const r in t)ht(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ht(t[r],e,s)}return t}function Bs(t,e,s,r){try{return r?t(...r):t()}catch(n){xr(n,e,s)}}function it(t,e,s,r){if(G(t)){const n=Bs(t,e,s,r);return n&&Ji(n)&&n.catch(i=>{xr(i,e,s)}),n}if(F(t)){const n=[];for(let i=0;i<t.length;i++)n.push(it(t[i],e,s,r));return n}}function xr(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ae;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){ft(),Bs(i,null,10,[t,l,c]),pt();return}}ll(t,s,n,r,o)}function ll(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const Ce=[];let tt=-1;const Qt=[];let yt=null,Wt=0;const _o=Promise.resolve();let or=null;function wo(t){const e=or||_o;return t?e.then(this?t.bind(this):t):e}function cl(t){let e=tt+1,s=Ce.length;for(;e<s;){const r=e+s>>>1,n=Ce[r],i=Os(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function $n(t){if(!(t.flags&1)){const e=Os(t),s=Ce[Ce.length-1];!s||!(t.flags&2)&&e>=Os(s)?Ce.push(t):Ce.splice(cl(e),0,t),t.flags|=1,So()}}function So(){or||(or=_o.then(Eo))}function ul(t){F(t)?Qt.push(...t):yt&&t.id===-1?yt.splice(Wt+1,0,t):t.flags&1||(Qt.push(t),t.flags|=1),So()}function Jn(t,e,s=tt+1){for(;s<Ce.length;s++){const r=Ce[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ce.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function xo(t){if(Qt.length){const e=[...new Set(Qt)].sort((s,r)=>Os(s)-Os(r));if(Qt.length=0,yt){yt.push(...e);return}for(yt=e,Wt=0;Wt<yt.length;Wt++){const s=yt[Wt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}yt=null,Wt=0}}const Os=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Eo(t){try{for(tt=0;tt<Ce.length;tt++){const e=Ce[tt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Bs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;tt<Ce.length;tt++){const e=Ce[tt];e&&(e.flags&=-2)}tt=-1,Ce.length=0,xo(),or=null,(Ce.length||Qt.length)&&Eo()}}let qe=null,To=null;function ar(t){const e=qe;return qe=t,To=t&&t.type.__scopeId||null,e}function dl(t,e=qe,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&oi(-1);const i=ar(e);let o;try{o=t(...n)}finally{ar(i),r._d&&oi(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Se(t,e){if(qe===null)return t;const s=Or(qe),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,a,l=ae]=e[n];i&&(G(i)&&(i={mounted:i,updated:i}),i.deep&&ht(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function kt(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(ft(),it(l,s,8,[t.el,a,t,e]),pt())}}function hl(t,e){if(Pe){let s=Pe.provides;const r=Pe.parent&&Pe.parent.provides;r===s&&(s=Pe.provides=Object.create(r)),s[t]=e}}function er(t,e,s=!1){const r=dc();if(r||Zt){let n=Zt?Zt._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&G(e)?e.call(r&&r.proxy):e}}const fl=Symbol.for("v-scx"),pl=()=>er(fl);function Lr(t,e,s){return ko(t,e,s)}function ko(t,e,s=ae){const{immediate:r,deep:n,flush:i,once:o}=s,a=Te({},s),l=e&&r||!e&&i!=="post";let c;if(Rs){if(i==="sync"){const p=pl();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=rt,p.resume=rt,p.pause=rt,p}}const u=Pe;a.call=(p,v,b)=>it(p,u,v,b);let d=!1;i==="post"?a.scheduler=p=>{je(p,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(p,v)=>{v?p():$n(p)}),a.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=al(t,e,a);return Rs&&(c?c.push(h):l&&h()),h}function gl(t,e,s){const r=this.proxy,n=ge(t)?t.includes(".")?Oo(r,t):()=>r[t]:t.bind(r,r);let i;G(e)?i=e:(i=e.handler,s=e);const o=Ms(this),a=ko(n,i.bind(r),s);return o(),a}function Oo(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const ml=Symbol("_vte"),vl=t=>t.__isTeleport,bl=Symbol("_leaveCb");function jn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,jn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ao(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Yn(t,e){let s;return!!((s=Object.getOwnPropertyDescriptor(t,e))&&!s.configurable)}const lr=new WeakMap;function bs(t,e,s,r,n=!1){if(F(t)){t.forEach((b,w)=>bs(b,e&&(F(e)?e[w]:e),s,r,n));return}if(ys(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&bs(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?Or(r.component):r.el,o=n?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ae?a.refs={}:a.refs,d=a.setupState,h=te(d),p=d===ae?Gi:b=>Yn(u,b)?!1:se(h,b),v=(b,w)=>!(w&&Yn(u,w));if(c!=null&&c!==l){if(Xn(e),ge(c))u[c]=null,p(c)&&(d[c]=null);else if(Ee(c)){const b=e;v(c,b.k)&&(c.value=null),b.k&&(u[b.k]=null)}}if(G(l))Bs(l,a,12,[o,u]);else{const b=ge(l),w=Ee(l);if(b||w){const A=()=>{if(t.f){const O=b?p(l)?d[l]:u[l]:v()||!t.k?l.value:u[t.k];if(n)F(O)&&Sn(O,i);else if(F(O))O.includes(i)||O.push(i);else if(b)u[l]=[i],p(l)&&(d[l]=u[l]);else{const x=[i];v(l,t.k)&&(l.value=x),t.k&&(u[t.k]=x)}}else b?(u[l]=o,p(l)&&(d[l]=o)):w&&(v(l,t.k)&&(l.value=o),t.k&&(u[t.k]=o))};if(o){const O=()=>{A(),lr.delete(t)};O.id=-1,lr.set(t,O),je(O,s)}else Xn(t),A()}}}function Xn(t){const e=lr.get(t);e&&(e.flags|=8,lr.delete(t))}wr().requestIdleCallback;wr().cancelIdleCallback;const ys=t=>!!t.type.__asyncLoader,Ro=t=>t.type.__isKeepAlive;function yl(t,e){Co(t,"a",e)}function _l(t,e){Co(t,"da",e)}function Co(t,e,s=Pe){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Er(e,r,s),s){let n=s.parent;for(;n&&n.parent;)Ro(n.parent.vnode)&&wl(r,e,s,n),n=n.parent}}function wl(t,e,s,r){const n=Er(e,t,r,!0);Po(()=>{Sn(r[e],n)},s)}function Er(t,e,s=Pe,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{ft();const a=Ms(s),l=it(e,s,t,o);return a(),pt(),l});return r?n.unshift(i):n.push(i),i}}const mt=t=>(e,s=Pe)=>{(!Rs||t==="sp")&&Er(t,(...r)=>e(...r),s)},Sl=mt("bm"),Un=mt("m"),xl=mt("bu"),El=mt("u"),Tl=mt("bum"),Po=mt("um"),kl=mt("sp"),Ol=mt("rtg"),Al=mt("rtc");function Rl(t,e=Pe){Er("ec",t,e)}const Cl=Symbol.for("v-ndc");function tr(t,e,s,r){let n;const i=s,o=F(t);if(o||ge(t)){const a=o&&Dt(t);let l=!1,c=!1;a&&(l=!Fe(t),c=gt(t),t=Sr(t)),n=new Array(t.length);for(let u=0,d=t.length;u<d;u++)n[u]=e(l?c?ss(Ye(t[u])):Ye(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,i)}else if(ie(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];n[l]=e(t[u],u,l,i)}}else n=[];return n}const tn=t=>t?Qo(t)?Or(t):tn(t.parent):null,_s=Te(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>tn(t.parent),$root:t=>tn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>$o(t),$forceUpdate:t=>t.f||(t.f=()=>{$n(t.update)}),$nextTick:t=>t.n||(t.n=wo.bind(t.proxy)),$watch:t=>gl.bind(t)}),Br=(t,e)=>t!==ae&&!t.__isScriptSetup&&se(t,e),Pl={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(Br(r,e))return o[e]=1,r[e];if(n!==ae&&se(n,e))return o[e]=2,n[e];if(se(i,e))return o[e]=3,i[e];if(s!==ae&&se(s,e))return o[e]=4,s[e];sn&&(o[e]=0)}}const c=_s[e];let u,d;if(c)return e==="$attrs"&&xe(t.attrs,"get",""),c(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(s!==ae&&se(s,e))return o[e]=4,s[e];if(d=l.config.globalProperties,se(d,e))return d[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return Br(n,e)?(n[e]=s,!0):r!==ae&&se(r,e)?(r[e]=s,!0):se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,props:i,type:o}},a){let l;return!!(s[a]||t!==ae&&a[0]!=="$"&&se(t,a)||Br(e,a)||se(i,a)||se(r,a)||se(_s,a)||se(n.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:se(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Qn(t){return F(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let sn=!0;function Il(t){const e=$o(t),s=t.proxy,r=t.ctx;sn=!1,e.beforeCreate&&Zn(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:v,activated:b,deactivated:w,beforeDestroy:A,beforeUnmount:O,destroyed:x,unmounted:R,render:H,renderTracked:K,renderTriggered:J,errorCaptured:he,serverPrefetch:me,expose:Ve,inheritAttrs:ot,components:z,directives:P,filters:V}=e;if(c&&$l(c,r,null),o)for(const ee in o){const C=o[ee];G(C)&&(r[ee]=C.bind(s))}if(n){const ee=n.call(s,s);ie(ee)&&(t.data=Cn(ee))}if(sn=!0,i)for(const ee in i){const C=i[ee],_=G(C)?C.bind(s,s):G(C.get)?C.get.bind(s,s):rt,j=!G(C)&&G(C.set)?C.set.bind(s):rt,le=ln({get:_,set:j});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>le.value,set:ye=>le.value=ye})}if(a)for(const ee in a)Io(a[ee],r,s,ee);if(l){const ee=G(l)?l.call(s):l;Reflect.ownKeys(ee).forEach(C=>{hl(C,ee[C])})}u&&Zn(u,t,"c");function oe(ee,C){F(C)?C.forEach(_=>ee(_.bind(s))):C&&ee(C.bind(s))}if(oe(Sl,d),oe(Un,h),oe(xl,p),oe(El,v),oe(yl,b),oe(_l,w),oe(Rl,he),oe(Al,K),oe(Ol,J),oe(Tl,O),oe(Po,R),oe(kl,me),F(Ve))if(Ve.length){const ee=t.exposed||(t.exposed={});Ve.forEach(C=>{Object.defineProperty(ee,C,{get:()=>s[C],set:_=>s[C]=_,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===rt&&(t.render=H),ot!=null&&(t.inheritAttrs=ot),z&&(t.components=z),P&&(t.directives=P),me&&Ao(t)}function $l(t,e,s=rt){F(t)&&(t=rn(t));for(const r in t){const n=t[r];let i;ie(n)?"default"in n?i=er(n.from||r,n.default,!0):i=er(n.from||r):i=er(n),Ee(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Zn(t,e,s){it(F(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function Io(t,e,s,r){let n=r.includes(".")?Oo(s,r):()=>s[r];if(ge(t)){const i=e[t];G(i)&&Lr(n,i)}else if(G(t))Lr(n,t.bind(s));else if(ie(t))if(F(t))t.forEach(i=>Io(i,e,s,r));else{const i=G(t.handler)?t.handler.bind(s):e[t.handler];G(i)&&Lr(n,i,t)}}function $o(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!s&&!r?l=e:(l={},n.length&&n.forEach(c=>cr(l,c,o,!0)),cr(l,e,o)),ie(e)&&i.set(e,l),l}function cr(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&cr(t,i,s,!0),n&&n.forEach(o=>cr(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const a=jl[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const jl={data:ei,props:ti,emits:ti,methods:fs,computed:fs,beforeCreate:Oe,created:Oe,beforeMount:Oe,mounted:Oe,beforeUpdate:Oe,updated:Oe,beforeDestroy:Oe,beforeUnmount:Oe,destroyed:Oe,unmounted:Oe,activated:Oe,deactivated:Oe,errorCaptured:Oe,serverPrefetch:Oe,components:fs,directives:fs,watch:Nl,provide:ei,inject:Ul};function ei(t,e){return e?t?function(){return Te(G(t)?t.call(this,this):t,G(e)?e.call(this,this):e)}:e:t}function Ul(t,e){return fs(rn(t),rn(e))}function rn(t){if(F(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Oe(t,e){return t?[...new Set([].concat(t,e))]:e}function fs(t,e){return t?Te(Object.create(null),t,e):e}function ti(t,e){return t?F(t)&&F(e)?[...new Set([...t,...e])]:Te(Object.create(null),Qn(t),Qn(e??{})):e}function Nl(t,e){if(!t)return e;if(!e)return t;const s=Te(Object.create(null),t);for(const r in e)s[r]=Oe(t[r],e[r]);return s}function jo(){return{app:null,config:{isNativeTag:Gi,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dl=0;function Ll(t,e){return function(r,n=null){G(r)||(r=Te({},r)),n!=null&&!ie(n)&&(n=null);const i=jo(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:Dl++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:vc,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&G(u.install)?(o.add(u),u.install(c,...d)):G(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,h){if(!l){const p=c._ceVNode||Ke(r,n);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(p,u,h),l=!0,c._container=u,u.__vue_app__=c,Or(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(it(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Zt;Zt=c;try{return u()}finally{Zt=d}}};return c}}let Zt=null;const Bl=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${xt(e)}Modifiers`]||t[`${Tt(e)}Modifiers`];function Ml(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||ae;let n=s;const i=e.startsWith("update:"),o=i&&Bl(r,e.slice(7));o&&(o.trim&&(n=s.map(u=>ge(u)?u.trim():u)),o.number&&(n=s.map(_r)));let a,l=r[a=$r(e)]||r[a=$r(xt(e))];!l&&i&&(l=r[a=$r(Tt(e))]),l&&it(l,t,6,n);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,it(c,t,6,n)}}const ql=new WeakMap;function Uo(t,e,s=!1){const r=s?ql:e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!G(t)){const l=c=>{const u=Uo(c,e,!0);u&&(a=!0,Te(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ie(t)&&r.set(t,null),null):(F(i)?i.forEach(l=>o[l]=null):Te(o,i),ie(t)&&r.set(t,o),o)}function Tr(t,e){return!t||!vr(e)?!1:(e=e.slice(2).replace(/Once$/,""),se(t,e[0].toLowerCase()+e.slice(1))||se(t,Tt(e))||se(t,e))}function si(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:p,ctx:v,inheritAttrs:b}=t,w=ar(t);let A,O;try{if(s.shapeFlag&4){const R=n||r,H=R;A=st(c.call(H,R,u,d,p,h,v)),O=a}else{const R=e;A=st(R.length>1?R(d,{attrs:a,slots:o,emit:l}):R(d,null)),O=e.props?a:Fl(a)}}catch(R){ws.length=0,xr(R,t,1),A=Ke(Et)}let x=A;if(O&&b!==!1){const R=Object.keys(O),{shapeFlag:H}=x;R.length&&H&7&&(i&&R.some(wn)&&(O=Kl(O,i)),x=rs(x,O,!1,!0))}return s.dirs&&(x=rs(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(s.dirs):s.dirs),s.transition&&jn(x,s.transition),A=x,ar(w),A}const Fl=t=>{let e;for(const s in t)(s==="class"||s==="style"||vr(s))&&((e||(e={}))[s]=t[s]);return e},Kl=(t,e)=>{const s={};for(const r in t)(!wn(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function Vl(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?ri(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(No(o,r,h)&&!Tr(c,h))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ri(r,o,c):!0:!!o;return!1}function ri(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(No(e,t,i)&&!Tr(s,i))return!0}return!1}function No(t,e,s){const r=t[s],n=e[s];return s==="style"&&ie(r)&&ie(n)?!Ls(r,n):r!==n}function Wl({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const Do={},Lo=()=>Object.create(Do),Bo=t=>Object.getPrototypeOf(t)===Do;function Hl(t,e,s,r=!1){const n={},i=Lo();t.propsDefaults=Object.create(null),Mo(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Za(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function zl(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=te(n),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Tr(t.emitsOptions,h))continue;const p=e[h];if(l)if(se(i,h))p!==i[h]&&(i[h]=p,c=!0);else{const v=xt(h);n[v]=nn(l,a,v,p,t,!1)}else p!==i[h]&&(i[h]=p,c=!0)}}}else{Mo(t,e,n,i)&&(c=!0);let u;for(const d in a)(!e||!se(e,d)&&((u=Tt(d))===d||!se(e,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(n[d]=nn(l,a,d,void 0,t,!0)):delete n[d]);if(i!==a)for(const d in i)(!e||!se(e,d))&&(delete i[d],c=!0)}c&&dt(t.attrs,"set","")}function Mo(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(gs(l))continue;const c=e[l];let u;n&&se(n,u=xt(l))?!i||!i.includes(u)?s[u]=c:(a||(a={}))[u]=c:Tr(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=te(s),c=a||ae;for(let u=0;u<i.length;u++){const d=i[u];s[d]=nn(n,l,d,c[d],t,!se(c,d))}}return o}function nn(t,e,s,r,n,i){const o=t[s];if(o!=null){const a=se(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&G(l)){const{propsDefaults:c}=n;if(s in c)r=c[s];else{const u=Ms(n);r=c[s]=l.call(null,e),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Tt(s))&&(r=!0))}return r}const Gl=new WeakMap;function qo(t,e,s=!1){const r=s?Gl:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!G(t)){const u=d=>{l=!0;const[h,p]=qo(d,e,!0);Te(o,h),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ie(t)&&r.set(t,Yt),Yt;if(F(i))for(let u=0;u<i.length;u++){const d=xt(i[u]);ni(d)&&(o[d]=ae)}else if(i)for(const u in i){const d=xt(u);if(ni(d)){const h=i[u],p=o[d]=F(h)||G(h)?{type:h}:Te({},h),v=p.type;let b=!1,w=!0;if(F(v))for(let A=0;A<v.length;++A){const O=v[A],x=G(O)&&O.name;if(x==="Boolean"){b=!0;break}else x==="String"&&(w=!1)}else b=G(v)&&v.name==="Boolean";p[0]=b,p[1]=w,(b||se(p,"default"))&&a.push(d)}}const c=[o,a];return ie(t)&&r.set(t,c),c}function ni(t){return t[0]!=="$"&&!gs(t)}const Nn=t=>t==="_"||t==="_ctx"||t==="$stable",Dn=t=>F(t)?t.map(st):[st(t)],Jl=(t,e,s)=>{if(e._n)return e;const r=dl((...n)=>Dn(e(...n)),s);return r._c=!1,r},Fo=(t,e,s)=>{const r=t._ctx;for(const n in t){if(Nn(n))continue;const i=t[n];if(G(i))e[n]=Jl(n,i,r);else if(i!=null){const o=Dn(i);e[n]=()=>o}}},Ko=(t,e)=>{const s=Dn(e);t.slots.default=()=>s},Vo=(t,e,s)=>{for(const r in e)(s||!Nn(r))&&(t[r]=e[r])},Yl=(t,e,s)=>{const r=t.slots=Lo();if(t.vnode.shapeFlag&32){const n=e._;n?(Vo(r,e,s),s&&Zi(r,"_",n,!0)):Fo(e,r)}else e&&Ko(t,e)},Xl=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=ae;if(r.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:Vo(n,e,s):(i=!e.$stable,Fo(e,n)),o=e}else e&&(Ko(t,e),o={default:1});if(i)for(const a in n)!Nn(a)&&o[a]==null&&delete n[a]},je=sc;function Ql(t){return Zl(t)}function Zl(t,e){const s=wr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=rt,insertStaticContent:v}=t,b=(f,g,y,k=null,S=null,E=null,U=void 0,$=null,I=!!g.dynamicChildren)=>{if(f===g)return;f&&!us(f,g)&&(k=Fs(f),ye(f,S,E,!0),f=null),g.patchFlag===-2&&(I=!1,g.dynamicChildren=null);const{type:T,ref:B,shapeFlag:N}=g;switch(T){case kr:w(f,g,y,k);break;case Et:A(f,g,y,k);break;case sr:f==null&&O(g,y,k,U);break;case Le:z(f,g,y,k,S,E,U,$,I);break;default:N&1?H(f,g,y,k,S,E,U,$,I):N&6?P(f,g,y,k,S,E,U,$,I):(N&64||N&128)&&T.process(f,g,y,k,S,E,U,$,I,as)}B!=null&&S?bs(B,f&&f.ref,E,g||f,!g):B==null&&f&&f.ref!=null&&bs(f.ref,null,E,f,!0)},w=(f,g,y,k)=>{if(f==null)r(g.el=a(g.children),y,k);else{const S=g.el=f.el;g.children!==f.children&&c(S,g.children)}},A=(f,g,y,k)=>{f==null?r(g.el=l(g.children||""),y,k):g.el=f.el},O=(f,g,y,k)=>{[f.el,f.anchor]=v(f.children,g,y,k,f.el,f.anchor)},x=({el:f,anchor:g},y,k)=>{let S;for(;f&&f!==g;)S=h(f),r(f,y,k),f=S;r(g,y,k)},R=({el:f,anchor:g})=>{let y;for(;f&&f!==g;)y=h(f),n(f),f=y;n(g)},H=(f,g,y,k,S,E,U,$,I)=>{if(g.type==="svg"?U="svg":g.type==="math"&&(U="mathml"),f==null)K(g,y,k,S,E,U,$,I);else{const T=f.el&&f.el._isVueCE?f.el:null;try{T&&T._beginPatch(),me(f,g,S,E,U,$,I)}finally{T&&T._endPatch()}}},K=(f,g,y,k,S,E,U,$)=>{let I,T;const{props:B,shapeFlag:N,transition:L,dirs:W}=f;if(I=f.el=o(f.type,E,B&&B.is,B),N&8?u(I,f.children):N&16&&he(f.children,I,null,k,S,Mr(f,E),U,$),W&&kt(f,null,k,"created"),J(I,f,f.scopeId,U,k),B){for(const ce in B)ce!=="value"&&!gs(ce)&&i(I,ce,null,B[ce],E,k);"value"in B&&i(I,"value",null,B.value,E),(T=B.onVnodeBeforeMount)&&et(T,k,f)}W&&kt(f,null,k,"beforeMount");const X=ec(S,L);X&&L.beforeEnter(I),r(I,g,y),((T=B&&B.onVnodeMounted)||X||W)&&je(()=>{T&&et(T,k,f),X&&L.enter(I),W&&kt(f,null,k,"mounted")},S)},J=(f,g,y,k,S)=>{if(y&&p(f,y),k)for(let E=0;E<k.length;E++)p(f,k[E]);if(S){let E=S.subTree;if(g===E||Go(E.type)&&(E.ssContent===g||E.ssFallback===g)){const U=S.vnode;J(f,U,U.scopeId,U.slotScopeIds,S.parent)}}},he=(f,g,y,k,S,E,U,$,I=0)=>{for(let T=I;T<f.length;T++){const B=f[T]=$?ut(f[T]):st(f[T]);b(null,B,g,y,k,S,E,U,$)}},me=(f,g,y,k,S,E,U)=>{const $=g.el=f.el;let{patchFlag:I,dynamicChildren:T,dirs:B}=g;I|=f.patchFlag&16;const N=f.props||ae,L=g.props||ae;let W;if(y&&Ot(y,!1),(W=L.onVnodeBeforeUpdate)&&et(W,y,g,f),B&&kt(g,f,y,"beforeUpdate"),y&&Ot(y,!0),(N.innerHTML&&L.innerHTML==null||N.textContent&&L.textContent==null)&&u($,""),T?Ve(f.dynamicChildren,T,$,y,k,Mr(g,S),E):U||C(f,g,$,null,y,k,Mr(g,S),E,!1),I>0){if(I&16)ot($,N,L,y,S);else if(I&2&&N.class!==L.class&&i($,"class",null,L.class,S),I&4&&i($,"style",N.style,L.style,S),I&8){const X=g.dynamicProps;for(let ce=0;ce<X.length;ce++){const re=X[ce],Ie=N[re],$e=L[re];($e!==Ie||re==="value")&&i($,re,Ie,$e,S,y)}}I&1&&f.children!==g.children&&u($,g.children)}else!U&&T==null&&ot($,N,L,y,S);((W=L.onVnodeUpdated)||B)&&je(()=>{W&&et(W,y,g,f),B&&kt(g,f,y,"updated")},k)},Ve=(f,g,y,k,S,E,U)=>{for(let $=0;$<g.length;$++){const I=f[$],T=g[$],B=I.el&&(I.type===Le||!us(I,T)||I.shapeFlag&198)?d(I.el):y;b(I,T,B,null,k,S,E,U,!0)}},ot=(f,g,y,k,S)=>{if(g!==y){if(g!==ae)for(const E in g)!gs(E)&&!(E in y)&&i(f,E,g[E],null,S,k);for(const E in y){if(gs(E))continue;const U=y[E],$=g[E];U!==$&&E!=="value"&&i(f,E,$,U,S,k)}"value"in y&&i(f,"value",g.value,y.value,S)}},z=(f,g,y,k,S,E,U,$,I)=>{const T=g.el=f?f.el:a(""),B=g.anchor=f?f.anchor:a("");let{patchFlag:N,dynamicChildren:L,slotScopeIds:W}=g;W&&($=$?$.concat(W):W),f==null?(r(T,y,k),r(B,y,k),he(g.children||[],y,B,S,E,U,$,I)):N>0&&N&64&&L&&f.dynamicChildren&&f.dynamicChildren.length===L.length?(Ve(f.dynamicChildren,L,y,S,E,U,$),(g.key!=null||S&&g===S.subTree)&&Wo(f,g,!0)):C(f,g,y,B,S,E,U,$,I)},P=(f,g,y,k,S,E,U,$,I)=>{g.slotScopeIds=$,f==null?g.shapeFlag&512?S.ctx.activate(g,y,k,U,I):V(g,y,k,S,E,U,I):ke(f,g,I)},V=(f,g,y,k,S,E,U)=>{const $=f.component=uc(f,k,S);if(Ro(f)&&($.ctx.renderer=as),hc($,!1,U),$.asyncDep){if(S&&S.registerDep($,oe,U),!f.el){const I=$.subTree=Ke(Et);A(null,I,g,y),f.placeholder=I.el}}else oe($,f,g,y,S,E,U)},ke=(f,g,y)=>{const k=g.component=f.component;if(Vl(f,g,y))if(k.asyncDep&&!k.asyncResolved){ee(k,g,y);return}else k.next=g,k.update();else g.el=f.el,k.vnode=g},oe=(f,g,y,k,S,E,U)=>{const $=()=>{if(f.isMounted){let{next:N,bu:L,u:W,parent:X,vnode:ce}=f;{const Qe=Ho(f);if(Qe){N&&(N.el=ce.el,ee(f,N,U)),Qe.asyncDep.then(()=>{je(()=>{f.isUnmounted||T()},S)});return}}let re=N,Ie;Ot(f,!1),N?(N.el=ce.el,ee(f,N,U)):N=ce,L&&Zs(L),(Ie=N.props&&N.props.onVnodeBeforeUpdate)&&et(Ie,X,N,ce),Ot(f,!0);const $e=si(f),Xe=f.subTree;f.subTree=$e,b(Xe,$e,d(Xe.el),Fs(Xe),f,S,E),N.el=$e.el,re===null&&Wl(f,$e.el),W&&je(W,S),(Ie=N.props&&N.props.onVnodeUpdated)&&je(()=>et(Ie,X,N,ce),S)}else{let N;const{el:L,props:W}=g,{bm:X,m:ce,parent:re,root:Ie,type:$e}=f,Xe=ys(g);Ot(f,!1),X&&Zs(X),!Xe&&(N=W&&W.onVnodeBeforeMount)&&et(N,re,g),Ot(f,!0);{Ie.ce&&Ie.ce._hasShadowRoot()&&Ie.ce._injectChildStyle($e);const Qe=f.subTree=si(f);b(null,Qe,y,k,f,S,E),g.el=Qe.el}if(ce&&je(ce,S),!Xe&&(N=W&&W.onVnodeMounted)){const Qe=g;je(()=>et(N,re,Qe),S)}(g.shapeFlag&256||re&&ys(re.vnode)&&re.vnode.shapeFlag&256)&&f.a&&je(f.a,S),f.isMounted=!0,g=y=k=null}};f.scope.on();const I=f.effect=new ro($);f.scope.off();const T=f.update=I.run.bind(I),B=f.job=I.runIfDirty.bind(I);B.i=f,B.id=f.uid,I.scheduler=()=>$n(B),Ot(f,!0),T()},ee=(f,g,y)=>{g.component=f;const k=f.vnode.props;f.vnode=g,f.next=null,zl(f,g.props,k,y),Xl(f,g.children,y),ft(),Jn(f),pt()},C=(f,g,y,k,S,E,U,$,I=!1)=>{const T=f&&f.children,B=f?f.shapeFlag:0,N=g.children,{patchFlag:L,shapeFlag:W}=g;if(L>0){if(L&128){j(T,N,y,k,S,E,U,$,I);return}else if(L&256){_(T,N,y,k,S,E,U,$,I);return}}W&8?(B&16&&os(T,S,E),N!==T&&u(y,N)):B&16?W&16?j(T,N,y,k,S,E,U,$,I):os(T,S,E,!0):(B&8&&u(y,""),W&16&&he(N,y,k,S,E,U,$,I))},_=(f,g,y,k,S,E,U,$,I)=>{f=f||Yt,g=g||Yt;const T=f.length,B=g.length,N=Math.min(T,B);let L;for(L=0;L<N;L++){const W=g[L]=I?ut(g[L]):st(g[L]);b(f[L],W,y,null,S,E,U,$,I)}T>B?os(f,S,E,!0,!1,N):he(g,y,k,S,E,U,$,I,N)},j=(f,g,y,k,S,E,U,$,I)=>{let T=0;const B=g.length;let N=f.length-1,L=B-1;for(;T<=N&&T<=L;){const W=f[T],X=g[T]=I?ut(g[T]):st(g[T]);if(us(W,X))b(W,X,y,null,S,E,U,$,I);else break;T++}for(;T<=N&&T<=L;){const W=f[N],X=g[L]=I?ut(g[L]):st(g[L]);if(us(W,X))b(W,X,y,null,S,E,U,$,I);else break;N--,L--}if(T>N){if(T<=L){const W=L+1,X=W<B?g[W].el:k;for(;T<=L;)b(null,g[T]=I?ut(g[T]):st(g[T]),y,X,S,E,U,$,I),T++}}else if(T>L)for(;T<=N;)ye(f[T],S,E,!0),T++;else{const W=T,X=T,ce=new Map;for(T=X;T<=L;T++){const Ne=g[T]=I?ut(g[T]):st(g[T]);Ne.key!=null&&ce.set(Ne.key,T)}let re,Ie=0;const $e=L-X+1;let Xe=!1,Qe=0;const ls=new Array($e);for(T=0;T<$e;T++)ls[T]=0;for(T=W;T<=N;T++){const Ne=f[T];if(Ie>=$e){ye(Ne,S,E,!0);continue}let Ze;if(Ne.key!=null)Ze=ce.get(Ne.key);else for(re=X;re<=L;re++)if(ls[re-X]===0&&us(Ne,g[re])){Ze=re;break}Ze===void 0?ye(Ne,S,E,!0):(ls[Ze-X]=T+1,Ze>=Qe?Qe=Ze:Xe=!0,b(Ne,g[Ze],y,null,S,E,U,$,I),Ie++)}const Fn=Xe?tc(ls):Yt;for(re=Fn.length-1,T=$e-1;T>=0;T--){const Ne=X+T,Ze=g[Ne],Kn=g[Ne+1],Vn=Ne+1<B?Kn.el||zo(Kn):k;ls[T]===0?b(null,Ze,y,Vn,S,E,U,$,I):Xe&&(re<0||T!==Fn[re]?le(Ze,y,Vn,2):re--)}}},le=(f,g,y,k,S=null)=>{const{el:E,type:U,transition:$,children:I,shapeFlag:T}=f;if(T&6){le(f.component.subTree,g,y,k);return}if(T&128){f.suspense.move(g,y,k);return}if(T&64){U.move(f,g,y,as);return}if(U===Le){r(E,g,y);for(let N=0;N<I.length;N++)le(I[N],g,y,k);r(f.anchor,g,y);return}if(U===sr){x(f,g,y);return}if(k!==2&&T&1&&$)if(k===0)$.beforeEnter(E),r(E,g,y),je(()=>$.enter(E),S);else{const{leave:N,delayLeave:L,afterLeave:W}=$,X=()=>{f.ctx.isUnmounted?n(E):r(E,g,y)},ce=()=>{E._isLeaving&&E[bl](!0),N(E,()=>{X(),W&&W()})};L?L(E,X,ce):ce()}else r(E,g,y)},ye=(f,g,y,k=!1,S=!1)=>{const{type:E,props:U,ref:$,children:I,dynamicChildren:T,shapeFlag:B,patchFlag:N,dirs:L,cacheIndex:W}=f;if(N===-2&&(S=!1),$!=null&&(ft(),bs($,null,y,f,!0),pt()),W!=null&&(g.renderCache[W]=void 0),B&256){g.ctx.deactivate(f);return}const X=B&1&&L,ce=!ys(f);let re;if(ce&&(re=U&&U.onVnodeBeforeUnmount)&&et(re,g,f),B&6)_a(f.component,y,k);else{if(B&128){f.suspense.unmount(y,k);return}X&&kt(f,null,g,"beforeUnmount"),B&64?f.type.remove(f,g,y,as,k):T&&!T.hasOnce&&(E!==Le||N>0&&N&64)?os(T,g,y,!1,!0):(E===Le&&N&384||!S&&B&16)&&os(I,g,y),k&&is(f)}(ce&&(re=U&&U.onVnodeUnmounted)||X)&&je(()=>{re&&et(re,g,f),X&&kt(f,null,g,"unmounted")},y)},is=f=>{const{type:g,el:y,anchor:k,transition:S}=f;if(g===Le){ya(y,k);return}if(g===sr){R(f);return}const E=()=>{n(y),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(f.shapeFlag&1&&S&&!S.persisted){const{leave:U,delayLeave:$}=S,I=()=>U(y,E);$?$(f.el,E,I):I()}else E()},ya=(f,g)=>{let y;for(;f!==g;)y=h(f),n(f),f=y;n(g)},_a=(f,g,y)=>{const{bum:k,scope:S,job:E,subTree:U,um:$,m:I,a:T}=f;ii(I),ii(T),k&&Zs(k),S.stop(),E&&(E.flags|=8,ye(U,f,g,y)),$&&je($,g),je(()=>{f.isUnmounted=!0},g)},os=(f,g,y,k=!1,S=!1,E=0)=>{for(let U=E;U<f.length;U++)ye(f[U],g,y,k,S)},Fs=f=>{if(f.shapeFlag&6)return Fs(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const g=h(f.anchor||f.el),y=g&&g[ml];return y?h(y):g};let Ir=!1;const qn=(f,g,y)=>{let k;f==null?g._vnode&&(ye(g._vnode,null,null,!0),k=g._vnode.component):b(g._vnode||null,f,g,null,null,null,y),g._vnode=f,Ir||(Ir=!0,Jn(k),xo(),Ir=!1)},as={p:b,um:ye,m:le,r:is,mt:V,mc:he,pc:C,pbc:Ve,n:Fs,o:t};return{render:qn,hydrate:void 0,createApp:Ll(qn)}}function Mr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Ot({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ec(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Wo(t,e,s=!1){const r=t.children,n=e.children;if(F(r)&&F(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=ut(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Wo(o,a)),a.type===kr&&(a.patchFlag===-1&&(a=n[i]=ut(a)),a.el=o.el),a.type===Et&&!a.el&&(a.el=o.el)}}function tc(t){const e=t.slice(),s=[0];let r,n,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(n=s[s.length-1],t[n]<c){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<c?i=a+1:o=a;c<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function Ho(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ho(e)}function ii(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function zo(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?zo(e.subTree):null}const Go=t=>t.__isSuspense;function sc(t,e){e&&e.pendingBranch?F(t)?e.effects.push(...t):e.effects.push(t):ul(t)}const Le=Symbol.for("v-fgt"),kr=Symbol.for("v-txt"),Et=Symbol.for("v-cmt"),sr=Symbol.for("v-stc"),ws=[];let Me=null;function Y(t=!1){ws.push(Me=t?null:[])}function rc(){ws.pop(),Me=ws[ws.length-1]||null}let As=1;function oi(t,e=!1){As+=t,t<0&&Me&&e&&(Me.hasOnce=!0)}function Jo(t){return t.dynamicChildren=As>0?Me||Yt:null,rc(),As>0&&Me&&Me.push(t),t}function Z(t,e,s,r,n,i){return Jo(m(t,e,s,r,n,i,!0))}function nc(t,e,s,r,n){return Jo(Ke(t,e,s,r,n,!0))}function Yo(t){return t?t.__v_isVNode===!0:!1}function us(t,e){return t.type===e.type&&t.key===e.key}const Xo=({key:t})=>t??null,rr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ge(t)||Ee(t)||G(t)?{i:qe,r:t,k:e,f:!!s}:t:null);function m(t,e=null,s=null,r=0,n=null,i=t===Le?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xo(e),ref:e&&rr(e),scopeId:To,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:qe};return a?(Ln(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=ge(s)?8:16),As>0&&!o&&Me&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Me.push(l),l}const Ke=ic;function ic(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===Cl)&&(t=Et),Yo(t)){const a=rs(t,e,!0);return s&&Ln(a,s),As>0&&!i&&Me&&(a.shapeFlag&6?Me[Me.indexOf(t)]=a:Me.push(a)),a.patchFlag=-2,a}if(mc(t)&&(t=t.__vccOpts),e){e=oc(e);let{class:a,style:l}=e;a&&!ge(a)&&(e.class=Re(a)),ie(l)&&(In(l)&&!F(l)&&(l=Te({},l)),e.style=En(l))}const o=ge(t)?1:Go(t)?128:vl(t)?64:ie(t)?4:G(t)?2:0;return m(t,e,s,r,n,o,i,!0)}function oc(t){return t?In(t)||Bo(t)?Te({},t):t:null}function rs(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?ac(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Xo(c),ref:e&&e.ref?s&&i?F(i)?i.concat(rr(e)):[i,rr(e)]:rr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Le?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&rs(t.ssContent),ssFallback:t.ssFallback&&rs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&jn(u,l.clone(u)),u}function on(t=" ",e=0){return Ke(kr,null,t,e)}function ai(t,e){const s=Ke(sr,null,t);return s.staticCount=e,s}function Ae(t="",e=!1){return e?(Y(),nc(Et,null,t)):Ke(Et,null,t)}function st(t){return t==null||typeof t=="boolean"?Ke(Et):F(t)?Ke(Le,null,t.slice()):Yo(t)?ut(t):Ke(kr,null,String(t))}function ut(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:rs(t)}function Ln(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(F(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Ln(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!Bo(e)?e._ctx=qe:n===3&&qe&&(qe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else G(e)?(e={default:e,_ctx:qe},s=32):(e=String(e),r&64?(s=16,e=[on(e)]):s=8);t.children=e,t.shapeFlag|=s}function ac(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=Re([e.class,r.class]));else if(n==="style")e.style=En([e.style,r.style]);else if(vr(n)){const i=e[n],o=r[n];o&&i!==o&&!(F(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function et(t,e,s,r=null){it(t,e,7,[s,r])}const lc=jo();let cc=0;function uc(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||lc,i={uid:cc++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $a(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qo(r,n),emitsOptions:Uo(r,n),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:r.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Ml.bind(null,i),t.ce&&t.ce(i),i}let Pe=null;const dc=()=>Pe||qe;let ur,an;{const t=wr(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};ur=e("__VUE_INSTANCE_SETTERS__",s=>Pe=s),an=e("__VUE_SSR_SETTERS__",s=>Rs=s)}const Ms=t=>{const e=Pe;return ur(t),t.scope.on(),()=>{t.scope.off(),ur(e)}},li=()=>{Pe&&Pe.scope.off(),ur(null)};function Qo(t){return t.vnode.shapeFlag&4}let Rs=!1;function hc(t,e=!1,s=!1){e&&an(e);const{props:r,children:n}=t.vnode,i=Qo(t);Hl(t,r,i,e),Yl(t,n,s||e);const o=i?fc(t,e):void 0;return e&&an(!1),o}function fc(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Pl);const{setup:r}=s;if(r){ft();const n=t.setupContext=r.length>1?gc(t):null,i=Ms(t),o=Bs(r,t,0,[t.props,n]),a=Ji(o);if(pt(),i(),(a||t.sp)&&!ys(t)&&Ao(t),a){if(o.then(li,li),e)return o.then(l=>{ci(t,l)}).catch(l=>{xr(l,t,0)});t.asyncDep=o}else ci(t,o)}else Zo(t)}function ci(t,e,s){G(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ie(e)&&(t.setupState=yo(e)),Zo(t)}function Zo(t,e,s){const r=t.type;t.render||(t.render=r.render||rt);{const n=Ms(t);ft();try{Il(t)}finally{pt(),n()}}}const pc={get(t,e){return xe(t,"get",""),t[e]}};function gc(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,pc),slots:t.slots,emit:t.emit,expose:e}}function Or(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(yo(el(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in _s)return _s[s](t)},has(e,s){return s in e||s in _s}})):t.proxy}function mc(t){return G(t)&&"__vccOpts"in t}const ln=(t,e)=>il(t,e,Rs),vc="3.5.28";let cn;const ui=typeof window<"u"&&window.trustedTypes;if(ui)try{cn=ui.createPolicy("vue",{createHTML:t=>t})}catch{}const ea=cn?t=>cn.createHTML(t):t=>t,bc="http://www.w3.org/2000/svg",yc="http://www.w3.org/1998/Math/MathML",lt=typeof document<"u"?document:null,di=lt&&lt.createElement("template"),_c={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?lt.createElementNS(bc,t):e==="mathml"?lt.createElementNS(yc,t):s?lt.createElement(t,{is:s}):lt.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>lt.createTextNode(t),createComment:t=>lt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>lt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{di.innerHTML=ea(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=di.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},wc=Symbol("_vtc");function Sc(t,e,s){const r=t[wc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const dr=Symbol("_vod"),ta=Symbol("_vsh"),xc={name:"show",beforeMount(t,{value:e},{transition:s}){t[dr]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):ds(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:r}){!e!=!s&&(r?e?(r.beforeEnter(t),ds(t,!0),r.enter(t)):r.leave(t,()=>{ds(t,!1)}):ds(t,e))},beforeUnmount(t,{value:e}){ds(t,e)}};function ds(t,e){t.style.display=e?t[dr]:"none",t[ta]=!e}const Ec=Symbol(""),Tc=/(?:^|;)\s*display\s*:/;function kc(t,e,s){const r=t.style,n=ge(s);let i=!1;if(s&&!n){if(e)if(ge(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&nr(r,a,"")}else for(const o in e)s[o]==null&&nr(r,o,"");for(const o in s)o==="display"&&(i=!0),nr(r,o,s[o])}else if(n){if(e!==s){const o=r[Ec];o&&(s+=";"+o),r.cssText=s,i=Tc.test(s)}}else e&&t.removeAttribute("style");dr in t&&(t[dr]=i?r.display:"",t[ta]&&(r.display="none"))}const hi=/\s*!important$/;function nr(t,e,s){if(F(s))s.forEach(r=>nr(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=Oc(t,e);hi.test(s)?t.setProperty(Tt(r),s.replace(hi,""),"important"):t[r]=s}}const fi=["Webkit","Moz","ms"],qr={};function Oc(t,e){const s=qr[e];if(s)return s;let r=xt(e);if(r!=="filter"&&r in t)return qr[e]=r;r=Qi(r);for(let n=0;n<fi.length;n++){const i=fi[n]+r;if(i in t)return qr[e]=i}return e}const pi="http://www.w3.org/1999/xlink";function gi(t,e,s,r,n,i=Ca(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(pi,e.slice(6,e.length)):t.setAttributeNS(pi,e,s):s==null||i&&!eo(s)?t.removeAttribute(e):t.setAttribute(e,i?"":nt(s)?String(s):s)}function mi(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?ea(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=eo(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function It(t,e,s,r){t.addEventListener(e,s,r)}function Ac(t,e,s,r){t.removeEventListener(e,s,r)}const vi=Symbol("_vei");function Rc(t,e,s,r,n=null){const i=t[vi]||(t[vi]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Cc(e);if(r){const c=i[e]=$c(r,n);It(t,a,c,l)}else o&&(Ac(t,a,o,l),i[e]=void 0)}}const bi=/(?:Once|Passive|Capture)$/;function Cc(t){let e;if(bi.test(t)){e={};let r;for(;r=t.match(bi);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Tt(t.slice(2)),e]}let Fr=0;const Pc=Promise.resolve(),Ic=()=>Fr||(Pc.then(()=>Fr=0),Fr=Date.now());function $c(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;it(jc(r,s.value),e,5,[r])};return s.value=t,s.attached=Ic(),s}function jc(t,e){if(F(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const yi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Uc=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?Sc(t,r,o):e==="style"?kc(t,s,r):vr(e)?wn(e)||Rc(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Nc(t,e,r,o))?(mi(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&gi(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ge(r))?mi(t,xt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),gi(t,e,r,o))};function Nc(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&yi(e)&&G(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return yi(e)&&ge(s)?!1:e in t}const hr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return F(e)?s=>Zs(e,s):e};function Dc(t){t.target.composing=!0}function _i(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const es=Symbol("_assign");function wi(t,e,s){return e&&(t=t.trim()),s&&(t=_r(t)),t}const Ge={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[es]=hr(n);const i=r||n.props&&n.props.type==="number";It(t,e?"change":"input",o=>{o.target.composing||t[es](wi(t.value,s,i))}),(s||i)&&It(t,"change",()=>{t.value=wi(t.value,s,i)}),e||(It(t,"compositionstart",Dc),It(t,"compositionend",_i),It(t,"change",_i))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[es]=hr(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?_r(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===l)||(t.value=l))}},Ss={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const n=br(e);It(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?_r(fr(o)):fr(o));t[es](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,wo(()=>{t._assigning=!1})}),t[es]=hr(r)},mounted(t,{value:e}){Si(t,e)},beforeUpdate(t,e,s){t[es]=hr(s)},updated(t,{value:e}){t._assigning||Si(t,e)}};function Si(t,e){const s=t.multiple,r=F(e);if(!(s&&!r&&!br(e))){for(let n=0,i=t.options.length;n<i;n++){const o=t.options[n],a=fr(o);if(s)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Ia(e,a)>-1}else o.selected=e.has(a);else if(Ls(fr(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function fr(t){return"_value"in t?t._value:t.value}const Lc=["ctrl","shift","alt","meta"],Bc={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Lc.some(s=>t[`${s}Key`]&&!e.includes(s))},sa=(t,e)=>{if(!t)return t;const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=((n,...i)=>{for(let o=0;o<e.length;o++){const a=Bc[e[o]];if(a&&a(n,e))return}return t(n,...i)}))},Mc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qc=(t,e)=>{const s=t._withKeys||(t._withKeys={}),r=e.join(".");return s[r]||(s[r]=(n=>{if(!("key"in n))return;const i=Tt(n.key);if(e.some(o=>o===i||Mc[o]===i))return t(n)}))},Fc=Te({patchProp:Uc},_c);let xi;function Kc(){return xi||(xi=Ql(Fc))}const Vc=((...t)=>{const e=Kc().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=Hc(r);if(!n)return;const i=e._component;!G(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Wc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function Wc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Hc(t){return ge(t)?document.querySelector(t):t}function Ar(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function zc(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}const Gc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Bn extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Jc extends Bn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ei extends Bn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ti extends Bn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var un;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(un||(un={}));class Yc{constructor(e,{headers:s={},customFetch:r,region:n=un.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=Gc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return zc(this,arguments,void 0,function*(s,r={}){var n;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let h={},{region:p}=r;p||(p=this.region);const v=new URL(`${this.url}/${s}`);p&&p!=="any"&&(h["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let b;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",b=c):typeof c=="string"?(h["Content-Type"]="text/plain",b=c):typeof FormData<"u"&&c instanceof FormData?b=c:(h["Content-Type"]="application/json",b=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?b=JSON.stringify(c):b=c;let w=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(w=o.signal,u.addEventListener("abort",()=>o.abort())):w=o.signal);const A=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:b,signal:w}).catch(H=>{throw new Jc(H)}),O=A.headers.get("x-relay-error");if(O&&O==="true")throw new Ei(A);if(!A.ok)throw new Ti(A);let x=((n=A.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),R;return x==="application/json"?R=yield A.json():x==="application/octet-stream"||x==="application/pdf"?R=yield A.blob():x==="text/event-stream"?R=A:x==="multipart/form-data"?R=yield A.formData():R=yield A.text(),{data:R,error:null,response:A}}catch(a){return{data:null,error:a,response:a instanceof Ti||a instanceof Ei?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var Xc=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Qc=class{constructor(t){var e,s,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,c=i.status,u=i.statusText;if(i.ok){var d,h;if(s.method!=="HEAD"){var p;const A=await i.text();A===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((p=s.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=A:a=JSON.parse(A))}const b=(d=s.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&w&&w.length>1&&(l=parseInt(w[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const b=await i.text();try{o=JSON.parse(b),Array.isArray(o)&&i.status===404&&(a=[],o=null,c=200,u="OK")}catch{i.status===404&&b===""?(c=204,u="No Content"):o={message:b}}if(o&&s.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&s.shouldThrowOnError)throw new Xc(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(i=>{var o;let a="",l="",c="";const u=i?.cause;if(u){var d,h,p,v;const A=(d=u?.message)!==null&&d!==void 0?d:"",O=(h=u?.code)!==null&&h!==void 0?h:"";a=`${(p=i?.name)!==null&&p!==void 0?p:"FetchError"}: ${i?.message}`,a+=`

Caused by: ${(v=u?.name)!==null&&v!==void 0?v:"Error"}: ${A}`,O&&(a+=` (${O})`),u?.stack&&(a+=`
${u.stack}`)}else{var b;a=(b=i?.stack)!==null&&b!==void 0?b:""}const w=this.url.toString().length;return i?.name==="AbortError"||i?.code==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",w>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${w} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(u?.name==="HeadersOverflowError"||u?.code==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",w>this.urlLengthLimit&&(l+=`. Your request URL is ${w} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:a,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}},Zc=class extends Qc{select(t){let e=!1;const s=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:s=e}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ki=new RegExp("[,()]");var Ht=class extends Zc{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&ki.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}notIn(t,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&ki.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${s})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:s,type:r}={}){let n="";r==="plain"?n="pl":r==="phrase"?n="ph":r==="websearch"&&(n="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${n}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(t,e,s){return this.url.searchParams.append(t,`not.${e}.${s}`),this}or(t,{foreignTable:e,referencedTable:s=e}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,s){return this.url.searchParams.append(t,`${e}.${s}`),this}},eu=class{constructor(t,{headers:e={},schema:s,fetch:r,urlLengthLimit:n=8e3}){this.url=t,this.headers=new Headers(e),this.schema=s,this.fetch=r,this.urlLengthLimit=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:s=!1,count:r}=e??{},n=s?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new Ht({method:n,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:s=!0}={}){var r;const n="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),s||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new Ht({method:n,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new Ht({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var s;const r="PATCH",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Ht({method:r,url:n,headers:i,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const s="DELETE",{url:r,headers:n}=this.cloneRequestState();return t&&n.append("Prefer",`count=${t}`),new Ht({method:s,url:r,headers:n,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Cs(t){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cs(t)}function tu(t,e){if(Cs(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(Cs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function su(t){var e=tu(t,"string");return Cs(e)=="symbol"?e:e+""}function ru(t,e,s){return(e=su(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Oi(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function Hs(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Oi(Object(s),!0).forEach(function(r){ru(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Oi(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var nu=class ra{constructor(e,{headers:s={},schema:r,fetch:n,timeout:i,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.urlLengthLimit=o;const a=n??globalThis.fetch;i!==void 0&&i>0?this.fetch=(l,c)=>{const u=new AbortController,d=setTimeout(()=>u.abort(),i),h=c?.signal;if(h){if(h.aborted)return clearTimeout(d),a(l,c);const p=()=>{clearTimeout(d),u.abort()};return h.addEventListener("abort",p,{once:!0}),a(l,Hs(Hs({},c),{},{signal:u.signal})).finally(()=>{clearTimeout(d),h.removeEventListener("abort",p)})}return a(l,Hs(Hs({},c),{},{signal:u.signal})).finally(()=>clearTimeout(d))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new eu(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new ra(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;const u=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(u)),d=r&&Object.values(s).some(u);d?(a="POST",c=s):r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([p,v])=>v!==void 0).map(([p,v])=>[p,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([p,v])=>{l.searchParams.append(p,v)})):(a="POST",c=s);const h=new Headers(this.headers);return d?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new Ht({method:a,url:l,headers:h,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class iu{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const r=s.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ou="2.95.3",au=`realtime-js/${ou}`,lu="1.0.0",na="2.0.0",Ai=na,dn=1e4,cu=1e3,uu=100;var _t;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_t||(_t={}));var ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ve||(ve={}));var ze;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ze||(ze={}));var hn;(function(t){t.websocket="websocket"})(hn||(hn={}));var $t;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})($t||($t={}));class du{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,r;const n=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var s,r;const n=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,s,r){var n,i;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let v=new DataView(p),b=0;v.setUint8(b++,this.KINDS.userBroadcastPush),v.setUint8(b++,l.length),v.setUint8(b++,a.length),v.setUint8(b++,o.length),v.setUint8(b++,c.length),v.setUint8(b++,d.length),v.setUint8(b++,s),Array.from(l,A=>v.setUint8(b++,A.charCodeAt(0))),Array.from(a,A=>v.setUint8(b++,A.charCodeAt(0))),Array.from(o,A=>v.setUint8(b++,A.charCodeAt(0))),Array.from(c,A=>v.setUint8(b++,A.charCodeAt(0))),Array.from(d,A=>v.setUint8(b++,A.charCodeAt(0)));var w=new Uint8Array(p.byteLength+r.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(r),p.byteLength),w.buffer}decode(e,s){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return s(r)}if(typeof e=="string"){const r=JSON.parse(e),[n,i,o,a,l]=r;return s({join_ref:n,ref:i,topic:o,event:a,payload:l})}return s({})}_binaryDecode(e){const s=new DataView(e),r=s.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,s,n)}_decodeUserBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+n));l=l+n;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const h=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,v={type:this.BROADCAST_EVENT,event:u,payload:p};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>s.includes(r)))}}class ia{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ue||(ue={}));const Ri=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=hu(o,t,e,n),i),{}):{}},hu=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n?.type,o=s[t];return i&&!r.includes(i)?oa(i,o):fn(o)},oa=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return mu(e,s)}switch(t){case ue.bool:return fu(e);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return pu(e);case ue.json:case ue.jsonb:return gu(e);case ue.timestamp:return vu(e);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return fn(e);default:return fn(e)}},fn=t=>t,fu=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},pu=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},gu=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},mu=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>oa(e,a))}return t},vu=t=>typeof t=="string"?t.replace(" ","T"):t,aa=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Kr{constructor(e,s,r={},n=dn){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ci;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ci||(Ci={}));class xs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xs.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=xs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=xs.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const h=u.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),v=u.filter(w=>p.indexOf(w.presence_ref)<0),b=d.filter(w=>h.indexOf(w.presence_ref)<0);v.length>0&&(a[c]=v),b.length>0&&(l[c]=b)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),h=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,n(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pi;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Pi||(Pi={}));var Es;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Es||(Es={}));var ct;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ct||(ct={}));class Jt{constructor(e,s={config:{}},r){var n,i;if(this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Kr(this,ze.join,this.params,this.timeout),this.rejoinTimer=new ia(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ve.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ze.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new xs(this),this.broadcastEndpointURL=aa(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ve.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Es.PRESENCE]&&this.bindings[Es.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(ct.CHANNEL_ERROR,p)),this._onClose(()=>e?.(ct.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e?.(ct.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(v=b?.length)!==null&&v!==void 0?v:0,A=[];for(let O=0;O<w;O++){const x=b[O],{filter:{event:R,schema:H,table:K,filter:J}}=x,he=p&&p[O];if(he&&he.event===R&&Jt.isFilterValueEqual(he.schema,H)&&Jt.isFilterValueEqual(he.table,K)&&Jt.isFilterValueEqual(he.filter,J))A.push(Object.assign(Object.assign({},x),{id:he.id}));else{this.unsubscribe(),this.state=ve.errored,e?.(ct.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(ct.SUBSCRIBED);return}}).receive("error",p=>{this.state=ve.errored,e?.(ct.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(ct.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===ve.joined&&e===Es.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,r)}async httpSend(e,s,r={}){var n;if(s==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ve.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ze.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Kr(this,ze.leave,{},e),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ve.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Kr(this,e,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>uu){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ze;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,s,r);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var v,b,w;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=p.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,b,w,A,O,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const R=p.id,H=(v=p.filter)===null||v===void 0?void 0:v.event;return R&&((b=s.ids)===null||b===void 0?void 0:b.includes(R))&&(H==="*"||H?.toLocaleLowerCase()===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const R=(O=(A=p?.filter)===null||A===void 0?void 0:A.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return R==="*"||R===((x=s?.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:b,table:w,commit_timestamp:A,type:O,errors:x}=v;h=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:A,eventType:O,new:{},old:{},errors:x}),this._getPayloadRecords(v))}p.callback(h,r)})}_isClosed(){return this.state===ve.closed}_isJoined(){return this.state===ve.joined}_isJoining(){return this.state===ve.joining}_isLeaving(){return this.state===ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Jt.isEqual(n.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}static isFilterValueEqual(e,s){return(e??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ze.close,{},e)}_onError(e){this._on(ze.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Ri(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Ri(e.columns,e.old_record)),s}}const Vr=()=>{},zs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bu=[1e3,2e3,5e3,1e4],yu=1e4,_u=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wu{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dn,this.transport=null,this.heartbeatIntervalMs=zs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vr,this.ref=0,this.reconnectTimer=null,this.vsn=Ai,this.logger=Vr,this.conn=null,this.sendBuffer=[],this.serializer=new du,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((r=s?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${hn.websocket}`,this.httpEndpoint=aa(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iu.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return s==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _t.connecting:return $t.Connecting;case _t.open:return $t.Open;case _t.closing:return $t.Closing;default:return $t.Closed}}isConnected(){return this.connectionState()===$t.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new Jt(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(cu,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},zs.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:n,payload:i,ref:o}=s,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(n,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===_t.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===_t.open||this.conn.readyState===_t.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ze.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([_u],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,r=!1;if(e)s=e,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:au};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ze.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ia(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,n,i,o,a,l,c,u,d,h,p;switch(this.transport=(s=e?.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:dn,this.heartbeatIntervalMs=(n=e?.heartbeatIntervalMs)!==null&&n!==void 0?n:zs.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:Vr,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:Ai,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(v=>bu[v-1]||yu),this.vsn){case lu:this.encode=(u=e?.encode)!==null&&u!==void 0?u:((v,b)=>b(JSON.stringify(v))),this.decode=(d=e?.decode)!==null&&d!==void 0?d:((v,b)=>b(JSON.parse(v)));break;case na:this.encode=(h=e?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Ps=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Su(t,e,s){const r=new URL(e,t);if(s)for(const[n,i]of Object.entries(s))i!==void 0&&r.searchParams.set(n,i);return r.toString()}async function xu(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Eu(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:s,path:r,query:n,body:i,headers:o}){const a=Su(t.baseUrl,r,n),l=await xu(t.auth),c=await e(a,{method:s,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const p=d?h:void 0,v=p?.error;throw new Ps(v?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:v?.type,icebergCode:v?.code,details:p})}return{status:c.status,headers:c.headers,data:h}}}}function Gs(t){return t.join("")}var Tu=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Gs(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const s={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gs(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gs(t.namespace)}`}),!0}catch(e){if(e instanceof Ps&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(s){if(s instanceof Ps&&s.status===409)return;throw s}}};function Bt(t){return t.join("")}var ku=class{constructor(t,e="",s){this.client=t,this.prefix=e,this.accessDelegation=s}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bt(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bt(t.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(t,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bt(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bt(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bt(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bt(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(s){if(s instanceof Ps&&s.status===404)return!1;throw s}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(s){if(s instanceof Ps&&s.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw s}}},Ou=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const s=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Eu({baseUrl:s,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Tu(this.client,e),this.tableOps=new ku(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Rr=class extends Error{constructor(t,e="storage",s,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=r}};function Cr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Js=class extends Rr{constructor(t,e,s,r="storage"){super(t,r,e,s),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},la=class extends Rr{constructor(t,e,s="storage"){super(t,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Au=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ru=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pn=t=>{if(Array.isArray(t))return t.map(s=>pn(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=pn(r)}),e},Cu=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Is(t){"@babel/helpers - typeof";return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Is(t)}function Pu(t,e){if(Is(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(Is(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iu(t){var e=Pu(t,"string");return Is(e)=="symbol"?e:e+""}function $u(t,e,s){return(e=Iu(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ii(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function q(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ii(Object(s),!0).forEach(function(r){$u(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ii(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}const $i=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},ju=async(t,e,s,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!s?.noResolveJson){const n=t,i=n.status||500;if(typeof n.json=="function")n.json().then(o=>{const a=o?.statusCode||o?.code||i+"";e(new Js($i(o),i,a,r))}).catch(()=>{if(r==="vectors"){const o=i+"";e(new Js(n.statusText||`HTTP ${i} error`,i,o,r))}else{const o=i+"";e(new Js(n.statusText||`HTTP ${i} error`,i,o,r))}});else{const o=i+"";e(new Js(n.statusText||`HTTP ${i} error`,i,o,r))}}else e(new la($i(t),t,r))},Uu=(t,e,s,r)=>{const n={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!r?q(q({},n),s):(Ru(r)?(n.headers=q({"Content-Type":"application/json"},e?.headers),n.body=JSON.stringify(r)):n.body=r,e?.duplex&&(n.duplex=e.duplex),q(q({},n),s))};async function hs(t,e,s,r,n,i,o){return new Promise((a,l)=>{t(s,Uu(e,r,n,i)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;if(o==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>ju(c,l,r,o))})}function ca(t="storage"){return{get:async(e,s,r,n)=>hs(e,"GET",s,r,n,void 0,t),post:async(e,s,r,n,i)=>hs(e,"POST",s,n,i,r,t),put:async(e,s,r,n,i)=>hs(e,"PUT",s,n,i,r,t),head:async(e,s,r,n)=>hs(e,"HEAD",s,q(q({},r),{},{noResolveJson:!0}),n,void 0,t),remove:async(e,s,r,n,i)=>hs(e,"DELETE",s,n,i,r,t)}}const Nu=ca("storage"),{get:$s,post:He,put:gn,head:Du,remove:Mn}=Nu,Be=ca("vectors");var ns=class{constructor(t,e={},s,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Au(s),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cr(s))return{data:null,error:s};throw s}}},Lu=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Cr(e))return{data:null,error:e};throw e}}};let ua;ua=Symbol.toStringTag;var Bu=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[ua]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lu(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Cr(e))return{data:null,error:e};throw e}}};const Mu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ji={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var qu=class extends ns{constructor(t,e={},s,r){super(t,e,r,"storage"),this.bucketId=s}async uploadOrUpdate(t,e,s,r){var n=this;return n.handleOperation(async()=>{let i;const o=q(q({},ji),r);let a=q(q({},n.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",n.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",n.encodeMetadata(l))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r?.headers&&(a=q(q({},a),r.headers));const c=n._removeEmptyFolders(e),u=n._getFinalPath(c),d=await(t=="PUT"?gn:He)(n.fetch,`${n.url}/object/${u}`,i,q({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(t,e,s){return this.uploadOrUpdate("POST",t,e,s)}async uploadToSignedUrl(t,e,s,r){var n=this;const i=n._removeEmptyFolders(t),o=n._getFinalPath(i),a=new URL(n.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),n.handleOperation(async()=>{let l;const c=q({upsert:ji.upsert},r),u=q(q({},n.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:i,fullPath:(await gn(n.fetch,a.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(t);const n=q({},s.headers);e?.upsert&&(n["x-upsert"]="true");const i=await He(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(s.url+i.url),a=o.searchParams.get("token");if(!a)throw new Rr("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,s){return this.uploadOrUpdate("PUT",t,e,s)}async move(t,e,s){var r=this;return r.handleOperation(async()=>await He(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:r.headers}))}async copy(t,e,s){var r=this;return r.handleOperation(async()=>({path:(await He(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,s){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(t),i=await He(r.fetch,`${r.url}/object/sign/${n}`,q({expiresIn:e},s?.transform?{transform:s.transform}:{}),{headers:r.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)}})}async createSignedUrls(t,e,s){var r=this;return r.handleOperation(async()=>{const n=await He(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return n.map(o=>q(q({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null}))})}download(t,e,s){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),i=n?`?${n}`:"",o=this._getFinalPath(t),a=()=>$s(this.fetch,`${this.url}/${r}/${o}${i}`,{headers:this.headers,noResolveJson:!0},s);return new Bu(a,this.shouldThrowOnError)}async info(t){var e=this;const s=e._getFinalPath(t);return e.handleOperation(async()=>pn(await $s(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})))}async exists(t){var e=this;const s=e._getFinalPath(t);try{return await Du(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r)&&r instanceof la){const n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const s=this._getFinalPath(t),r=[],n=e?.download?`download=${e.download===!0?"":e.download}`:"";n!==""&&r.push(n);const i=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${s}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Mn(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,s){var r=this;return r.handleOperation(async()=>{const n=q(q(q({},Mu),e),{},{prefix:t||""});return await He(r.fetch,`${r.url}/object/list/${r.bucketId}`,n,{headers:r.headers},s)})}async listV2(t,e){var s=this;return s.handleOperation(async()=>{const r=q({},t);return await He(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Fu="2.95.3",qs={"X-Client-Info":`storage-js/${Fu}`};var Ku=class extends ns{constructor(t,e={},s,r){const n=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."));const i=n.href.replace(/\/$/,""),o=q(q({},qs),e);super(i,o,s,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const s=e.listBucketOptionsToQueryString(t);return await $s(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $s(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var s=this;return s.handleOperation(async()=>await He(s.fetch,`${s.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}))}async updateBucket(t,e){var s=this;return s.handleOperation(async()=>await gn(s.fetch,`${s.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await He(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Mn(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Vu=class extends ns{constructor(t,e={},s){const r=t.replace(/\/$/,""),n=q(q({},qs),e);super(r,n,s,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await He(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const s=new URLSearchParams;t?.limit!==void 0&&s.set("limit",t.limit.toString()),t?.offset!==void 0&&s.set("offset",t.offset.toString()),t?.sortColumn&&s.set("sortColumn",t.sortColumn),t?.sortOrder&&s.set("sortOrder",t.sortOrder),t?.search&&s.set("search",t.search);const r=s.toString(),n=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await $s(e.fetch,n,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Mn(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Cu(t))throw new Rr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Ou({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(n,i){const o=n[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(n,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},Wu=class extends ns{constructor(t,e={},s){const r=t.replace(/\/$/,""),n=q(q({},qs),{},{"Content-Type":"application/json"},e);super(r,n,s,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var s=this;return s.handleOperation(async()=>await Be.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var s=this;return s.handleOperation(async()=>await Be.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers})||{})}},Hu=class extends ns{constructor(t,e={},s){const r=t.replace(/\/$/,""),n=q(q({},qs),{},{"Content-Type":"application/json"},e);super(r,n,s,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},zu=class extends ns{constructor(t,e={},s){const r=t.replace(/\/$/,""),n=q(q({},qs),{},{"Content-Type":"application/json"},e);super(r,n,s,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Be.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Gu=class extends zu{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Ju(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,s=this;return e().call(s,t)}async getBucket(t){var e=()=>super.getBucket,s=this;return e().call(s,t)}async listBuckets(t={}){var e=()=>super.listBuckets,s=this;return e().call(s,t)}async deleteBucket(t){var e=()=>super.deleteBucket,s=this;return e().call(s,t)}},Ju=class extends Wu{constructor(t,e,s,r){super(t,e,r),this.vectorBucketName=s}async createIndex(t){var e=()=>super.createIndex,s=this;return e().call(s,q(q({},t),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,s=this;return e().call(s,q(q({},t),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,t)}index(t){return new Yu(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Yu=class extends Hu{constructor(t,e,s,r,n){super(t,e,n),this.vectorBucketName=s,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,s=this;return e().call(s,q(q({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(t){var e=()=>super.getVectors,s=this;return e().call(s,q(q({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,s=this;return e().call(s,q(q({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,s=this;return e().call(s,q(q({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,s=this;return e().call(s,q(q({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Xu=class extends Ku{constructor(t,e={},s,r){super(t,e,s,r)}from(t){return new qu(this.url,this.headers,t,this.fetch)}get vectors(){return new Gu(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Vu(this.url+"/iceberg",this.headers,this.fetch)}};const da="2.95.3",zt=30*1e3,mn=3,Wr=mn*zt,Qu="http://localhost:9999",Zu="supabase.auth.token",ed={"X-Client-Info":`gotrue-js/${da}`},vn="X-Supabase-Api-Version",ha={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},td=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sd=600*1e3;class js extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function D(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class rd extends js{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function nd(t){return D(t)&&t.name==="AuthApiError"}class jt extends js{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class vt extends js{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class De extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hr(t){return D(t)&&t.name==="AuthSessionMissingError"}class Mt extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xs extends vt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function id(t){return D(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ui extends vt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class od extends vt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bn extends vt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function zr(t){return D(t)&&t.name==="AuthRetryableFetchError"}class Ni extends vt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class yn extends vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Di=` 	
\r=`.split(""),ad=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Di.length;e+=1)t[Di[e].charCodeAt(0)]=-2;for(let e=0;e<pr.length;e+=1)t[pr[e].charCodeAt(0)]=e;return t})();function Li(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(pr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(pr[r]),e.queuedBits-=6}}function fa(t,e,s){const r=ad[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Bi(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{ud(o,r,s)};for(let o=0;o<t.length;o+=1)fa(t.charCodeAt(o),n,i);return e.join("")}function ld(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cd(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}ld(r,e)}}function ud(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function ts(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)fa(t.charCodeAt(n),s,r);return new Uint8Array(e)}function dd(t){const e=[];return cd(t,s=>e.push(s)),new Uint8Array(e)}function Ut(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>Li(n,s,r)),Li(null,s,r),e.join("")}function hd(t){return Math.round(Date.now()/1e3)+t}function fd(){return Symbol("auth-callback")}const we=()=>typeof window<"u"&&typeof document<"u",At={tested:!1,writable:!1},pa=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(At.tested)return At.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),At.tested=!0,At.writable=!0}catch{At.tested=!0,At.writable=!1}return At.writable};function pd(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const ga=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gd=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Gt=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Rt=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},_e=async(t,e)=>{await t.removeItem(e)};class Pr{constructor(){this.promise=new Pr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Pr.promiseConstructor=Promise;function Qs(t){const e=t.split(".");if(e.length!==3)throw new yn("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!td.test(e[r]))throw new yn("JWT not in base64url format");return{header:JSON.parse(Bi(e[0])),payload:JSON.parse(Bi(e[1])),signature:ts(e[2]),raw:{header:e[0],payload:e[1]}}}async function md(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function vd(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function bd(t){return("0"+t.toString(16)).substr(-2)}function yd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,bd).join("")}async function _d(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function wd(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await _d(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qt(t,e,s=!1){const r=yd();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await Gt(t,`${e}-code-verifier`,n);const i=await wd(r);return[i,r===i?"plain":"s256"]}const Sd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xd(t){const e=t.headers.get(vn);if(!e||!e.match(Sd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ed(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Td(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kd=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ft(t){if(!kd.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gr(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Od(t,e){return new Proxy(t,{get:(s,r,n)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,n)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,r,n)}})}function Mi(t){return JSON.parse(JSON.stringify(t))}const Pt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ad=[502,503,504];async function qi(t){var e;if(!gd(t))throw new bn(Pt(t),0);if(Ad.includes(t.status))throw new bn(Pt(t),t.status);let s;try{s=await t.json()}catch(i){throw new jt(Pt(i),i)}let r;const n=xd(t);if(n&&n.getTime()>=ha["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Ni(Pt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new De}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ni(Pt(s),t.status,s.weak_password.reasons);throw new rd(Pt(s),t.status||500,r)}const Rd=(t,e,s,r)=>{const n={method:t,headers:e?.headers||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function M(t,e,s,r){var n;const i=Object.assign({},r?.headers);i[vn]||(i[vn]=ha["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Cd(t,e,s+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function Cd(t,e,s,r,n,i){const o=Rd(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new bn(Pt(l),0)}if(a.ok||await qi(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await qi(l)}}function We(t){var e;let s=null;$d(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=hd(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Fi(t){const e=We(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Pd(t){return{data:t,error:null}}function Id(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=Ar(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ki(t){return t}function $d(t){return t.access_token&&t.refresh_token&&t.expires_in}const Jr=["global","local","others"];class jd{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=ga(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=Jr[0]){if(Jr.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jr.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:wt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Ar(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Id,redirectTo:s?.redirectTo})}catch(s){if(D(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wt})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Ki});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);c[`${w}Page`]=b}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(D(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ft(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wt})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ft(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:wt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Ft(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:wt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ft(e.userId);try{const{data:s,error:r}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(D(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ft(e.userId),Ft(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await M(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Ki});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);c[`${w}Page`]=b}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(D(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await M(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(D(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await M(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(D(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await M(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await M(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await M(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(D(s))return{data:null,error:s};throw s}}}function Vi(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const Kt={debug:!!(globalThis&&pa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ma extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ud extends ma{}async function Nd(t,e,s){Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ud(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Kt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Dd(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function va(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Ld(t){return parseInt(t,16)}function Bd(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Md(t){var e;const{chainId:s,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=va(t.address),v=u?`${u}://${r}`:r,b=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${p}

${b}`;let A=`URI: ${d}
Version: ${h}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(A+=`
Expiration Time: ${n.toISOString()}`),a&&(A+=`
Not Before: ${a.toISOString()}`),l&&(A+=`
Request ID: ${l}`),c){let O=`
Resources:`;for(const x of c){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);O+=`
- ${x}`}A+=O}return`${w}
${A}`}class pe extends Error{constructor({message:e,code:s,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class gr extends pe{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function qd({error:t,options:e}){var s,r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new pe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new pe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new pe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new pe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new pe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(ba(o)){if(i.rp.id!==o)return new pe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Fd({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new pe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(ba(r)){if(s.rpId!==r)return new pe({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Kd{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Vd=new Kd;function Wd(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:r}=t,n=Ar(t,["challenge","user","excludeCredentials"]),i=ts(e).buffer,o=Object.assign(Object.assign({},s),{id:ts(s.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ts(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Hd(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,r=Ar(t,["challenge","allowCredentials"]),n=ts(e).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const a=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ts(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function zd(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ut(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ut(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Gd(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,r=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ut(new Uint8Array(n.authenticatorData)),clientDataJSON:Ut(new Uint8Array(n.clientDataJSON)),signature:Ut(new Uint8Array(n.signature)),userHandle:n.userHandle?Ut(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ba(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Wi(){var t,e;return!!(we()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Jd(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new gr("Browser returned unexpected credential type",e)}:{data:null,error:new gr("Empty credential response",e)}}catch(e){return{data:null,error:qd({error:e,options:t})}}}async function Yd(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new gr("Browser returned unexpected credential type",e)}:{data:null,error:new gr("Empty credential response",e)}}catch(e){return{data:null,error:Fd({error:e,options:t})}}}const Xd={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Qd={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function mr(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of t)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(s(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=mr(a,o):r[i]=mr(o)}else r[i]=o}return r}function Zd(t,e){return mr(Xd,t,e||{})}function eh(t,e){return mr(Qd,t,e||{})}class th{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:r,signal:n},i){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!a)return{data:null,error:l};const c=n??Vd.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){const d=r;if(d)u.name=`${u.id}:${d}`;else{const p=(await this.client.getUser()).data.user,v=((o=p?.user_metadata)===null||o===void 0?void 0:o.name)||p?.email||p?.id||"User";u.name=`${u.id}:${v}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=Zd(a.webauthn.credential_options.publicKey,i?.create),{data:d,error:h}=await Jd({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=eh(a.webauthn.credential_options.publicKey,i?.request),{data:d,error:h}=await Yd(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return D(a)?{data:null,error:a}:{data:null,error:new jt("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new js("rpId is required for WebAuthn authentication")};try{if(!Wi())return{data:null,error:new jt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new jt("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new js("rpId is required for WebAuthn registration")};try{if(!Wi())return{data:null,error:new jt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:n},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new jt("Unexpected error in register",o)}}}}Dd();const sh={url:Qu,storageKey:Zu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ed,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Hi(t,e,s){return await s()}const Vt={};class Us{get jwks(){var e,s;return(s=(e=Vt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Vt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vt[this.storageKey]=Object.assign(Object.assign({},Vt[this.storageKey]),{cachedAt:e})}constructor(e){var s,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},sh),e);if(this.storageKey=i.storageKey,this.instanceID=(s=Us.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Us.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&we()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new jd({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ga(i.fetch),this.lock=i.lock||Hi,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&we()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Nd:this.lock=Hi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new th(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:pa()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vi(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Vi(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${da}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},r="none";if(we()&&(s=pd(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),we()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),id(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return D(s)?this._returnResult({error:s}):this._returnResult({error:new jt("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:We}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(D(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await qt(this.storage,this.storageKey)),i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(s=h?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:v},xform:We})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h?.data)!==null&&r!==void 0?r:{},channel:(n=h?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:We})}else throw new Ys("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await _e(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await _e(this.storage,`${this.storageKey}-code-verifier`),D(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Fi})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Fi})}else throw new Ys("You must provide either an email or phone number and a password");const{data:r,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const i=new Mt;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,r,n,i,o,a,l,c,u,d,h;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:b,wallet:w,statement:A,options:O}=e;let x;if(we())if(typeof w=="object")x=w;else{const me=window;if("ethereum"in me&&typeof me.ethereum=="object"&&"request"in me.ethereum&&typeof me.ethereum.request=="function")x=me.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const R=new URL((s=O?.url)!==null&&s!==void 0?s:window.location.href),H=await x.request({method:"eth_requestAccounts"}).then(me=>me).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=va(H[0]);let J=(r=O?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!J){const me=await x.request({method:"eth_chainId"});J=Ld(me)}const he={domain:R.host,address:K,statement:A,uri:R.href,version:"1",chainId:J,nonce:(n=O?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=O?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=O?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=Md(he),v=await x.request({method:"personal_sign",params:[Bd(p),K]})}try{const{data:b,error:w}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:We});if(w)throw w;if(!b||!b.session||!b.user){const A=new Mt;return this._returnResult({data:{user:null,session:null},error:A})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(D(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var s,r,n,i,o,a,l,c,u,d,h,p;let v,b;if("message"in e)v=e.message,b=e.signature;else{const{chain:w,wallet:A,statement:O,options:x}=e;let R;if(we())if(typeof A=="object")R=A;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))R=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=A}const H=new URL((s=x?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in R&&R.signIn){const K=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),O?{statement:O}:null));let J;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")J=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)J=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)v=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),b=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${H.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(n=(r=x?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=x?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((c=x?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(u=x?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const K=await R.signMessage(new TextEncoder().encode(v),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=K}}try{const{data:w,error:A}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ut(b)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:We});if(A)throw A;if(!w||!w.session||!w.user){const O=new Mt;return this._returnResult({data:{user:null,session:null},error:O})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:A})}catch(w){if(D(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const s=await Rt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{if(!r&&this.flowType==="pkce")throw new od;const{data:i,error:o}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:We});if(await _e(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Mt;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(await _e(this.storage,`${this.storageKey}-code-verifier`),D(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:We}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Mt;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await qt(this.storage,this.storageKey));const{error:d}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new Ys("You must provide either an email or phone number.")}catch(a){if(await _e(this.storage,`${this.storageKey}-code-verifier`),D(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:We});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if(D(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var s,r,n,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await qt(this.storage,this.storageKey));const c=await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Pd});return!((i=c.data)===null||i===void 0)&&i.url&&we()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await _e(this.storage,`${this.storageKey}-code-verifier`),D(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new De;const{error:n}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(D(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await M(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await M(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new Ys("You must provide either an email or phone number and a type")}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Rt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Wr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Rt(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Gr()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Od(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wt}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new De}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:wt})})}catch(s){if(D(s))return Hr(s)&&(await this._removeSession(),await _e(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new De;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await qt(this.storage,this.storageKey));const{data:c,error:u}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:wt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await _e(this.storage,`${this.storageKey}-code-verifier`),D(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new De;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=Qs(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(D(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new De;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!we())throw new Xs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ui("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xs("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ui("No code detected.");const{data:O,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Xs("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const p=h-u;p*1e3<=zt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const v=h-d;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,u);const{data:b,error:w}=await this._getUser(i);if(w)throw w;const A={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:e.type},error:null})}catch(r){if(D(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Rt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i&&!Hr(i))return this._returnResult({error:i});const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(nd(a)&&(a.status===404||a.status===401||a.status===403)||Hr(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await _e(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=fd(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await qt(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(await _e(this.storage,`${this.storageKey}-code-verifier`),D(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return we()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(D(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var r;try{const{error:n,data:{session:i}}=s;if(n)throw n;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:We}),{data:h,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Mt}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(n){if(await _e(this.storage,`${this.storageKey}-code-verifier`),D(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await vd(async n=>(n>0&&await md(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:We})),(n,i)=>{const o=200*Math.pow(2,n);return i&&zr(i)&&Date.now()+o-r<zt})}catch(r){if(this._debug(s,"error",r),D(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),we()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Rt(this.storage,this.storageKey);if(n&&this.userStorage){let o=await Rt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Gt(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o?.user)!==null&&e!==void 0?e:Gr()}else if(n&&!n.user&&!n.user){const o=await Rt(this.storage,this.storageKey+"-user");o&&o?.user?(n.user=o.user,await _e(this.storage,this.storageKey+"-user"),await Gt(this.storage,this.storageKey,n)):n.user=Gr()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Wr;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Wr}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),zr(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&o?.user?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new De;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Pr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new De;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),D(i)){const o={data:null,error:i};return zr(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await _e(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Gt(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=Mi(n);await Gt(this.storage,this.storageKey,i)}else{const n=Mi(s);await Gt(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _e(this.storage,this.storageKey),await _e(this.storage,this.storageKey+"-code-verifier"),await _e(this.storage,this.storageKey+"-user"),this.userStorage&&await _e(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&we()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/zt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${zt}ms, refresh threshold is ${mn} ticks`),n<=mn&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ma)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await qt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r?.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?this._returnResult({data:null,error:i}):await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await M(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((n=l?.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?zd(e.webauthn.credential_response):Gd(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Wd(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Hd(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=s?.factors)!==null&&e!==void 0?e:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(e){var s,r,n,i;if(e)try{const{payload:p}=Qs(e);let v=null;p.aal&&(v=p.aal);let b=v;const{data:{user:w},error:A}=await this.getUser(e);if(A)return this._returnResult({data:null,error:A});((r=(s=w?.factors)===null||s===void 0?void 0:s.filter(R=>R.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const x=p.amr||[];return{data:{currentLevel:v,nextLevel:b,currentAuthenticationMethods:x},error:null}}catch(p){if(D(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Qs(o.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(u="aal2");const h=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?await M(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new De})})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new De});const o=await M(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&we()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new De});const o=await M(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&we()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;return r?this._returnResult({data:null,error:r}):s?await M(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new De})})}catch(e){if(D(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?(await M(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new De})})}catch(s){if(D(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(a=>a.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+sd>n)return r;const{data:i,error:o}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});r=p.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=Qs(r);s?.allowExpired||Ed(i.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:n,signature:o},error:null}}const u=Td(n.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,dd(`${a}.${l}`)))throw new yn("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}}Us.nextInstanceID={};const rh=Us,nh="2.95.3";let ps="";typeof Deno<"u"?ps="deno":typeof document<"u"?ps="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ps="react-native":ps="node";const ih={"X-Client-Info":`supabase-js-${ps}/${nh}`},oh={headers:ih},ah={schema:"public"},lh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ch={};function Ns(t){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(t)}function uh(t,e){if(Ns(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(Ns(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dh(t){var e=uh(t,"string");return Ns(e)=="symbol"?e:e+""}function hh(t,e,s){return(e=dh(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function zi(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function fe(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?zi(Object(s),!0).forEach(function(r){hh(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):zi(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}const fh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ph=()=>Headers,gh=(t,e,s)=>{const r=fh(s),n=ph();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new n(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,fe(fe({},o),{},{headers:c}))}};function mh(t){return t.endsWith("/")?t:t+"/"}function vh(t,e){var s,r;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:fe(fe({},l),n),auth:fe(fe({},c),i),realtime:fe(fe({},u),o),storage:{},global:fe(fe(fe({},d),a),{},{headers:fe(fe({},(s=d?.headers)!==null&&s!==void 0?s:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function bh(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mh(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var yh=class extends rh{constructor(t){super(t)}},_h=class{constructor(t,e,s){var r,n;this.supabaseUrl=t,this.supabaseKey=e;const i=bh(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:ah,realtime:ch,auth:fe(fe({},lh),{},{storageKey:o}),global:oh},l=vh(s??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=gh(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(fe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new nu(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new Xu(this.storageUrl.href,this.headers,this.fetch,s?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Yc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,s)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,s;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:n,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yh({url:this.authUrl.href,headers:fe(fe({},h),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:n,flowType:o,lock:a,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new wu(this.realtimeUrl.href,fe(fe({},t),{},{params:fe(fe({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const wh=(t,e,s)=>new _h(t,e,s);function Sh(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const s=e.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Sh()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xh="https://ncwxsvcqruvmrzcumwww.supabase.co",Eh="sb_publishable_URXvXo0-AhRMCpt5d0jNKQ_UNbjDQmm",be=wh(xh,Eh),Th="/assets/logo-D5OqcSja.png",kh={class:"max-w-md mx-auto bg-white p-8 rounded-xl shadow-md border border-gray-100"},Oh={key:0,class:"text-red-500 text-sm text-center"},Ah=["disabled"],Rh={__name:"Login",emits:["login-success"],setup(t,{emit:e}){const s=Q(""),r=Q(""),n=Q(!1),i=Q(""),o=e;async function a(){n.value=!0,i.value="";const{data:l,error:c}=await be.auth.signInWithPassword({email:s.value,password:r.value});c?i.value=c.message:o("login-success",l.user),n.value=!1}return(l,c)=>(Y(),Z("div",kh,[c[4]||(c[4]=m("h2",{class:"text-2xl font-bold text-center text-indigo-800 mb-6"},"Acceso Admin",-1)),m("form",{onSubmit:sa(a,["prevent"]),class:"space-y-4"},[m("div",null,[c[2]||(c[2]=m("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),Se(m("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u),type:"email",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border"},null,512),[[Ge,s.value]])]),m("div",null,[c[3]||(c[3]=m("label",{class:"block text-sm font-medium text-gray-700"},"Contrasea",-1)),Se(m("input",{"onUpdate:modelValue":c[1]||(c[1]=u=>r.value=u),type:"password",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border"},null,512),[[Ge,r.value]])]),i.value?(Y(),Z("div",Oh,ne(i.value),1)):Ae("",!0),m("button",{type:"submit",disabled:n.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},ne(n.value?"Ingresando...":"Ingresar"),9,Ah)],32)]))}},Ch={class:"bg-white p-6 rounded-xl shadow-lg border border-indigo-100 mt-8"},Ph={class:"flex justify-between items-center mb-6 border-b pb-4"},Ih={class:"text-xl font-bold text-indigo-900"},$h={class:"flex gap-4 mb-6"},jh={key:0},Uh={key:0,class:"mb-6 flex justify-end"},Nh={class:"font-bold text-lg text-gray-800 mb-2"},Dh=["disabled"],Lh={key:0,class:"space-y-4"},Bh={class:"grid grid-cols-2 gap-4"},Mh={key:1,class:"space-y-4"},qh={class:"grid grid-cols-1 gap-4"},Fh={class:"border p-3 rounded-md bg-white"},Kh={class:"border p-3 rounded-md bg-white"},Vh={class:"flex gap-2"},Wh=["disabled"],Hh={class:"border-t pt-6"},zh={key:0,class:"text-center text-gray-500"},Gh={key:1,class:"space-y-2 max-h-80 overflow-y-auto"},Jh={class:"text-sm font-medium text-gray-700"},Yh={class:"text-xs text-gray-500 ml-2"},Xh={class:"flex gap-2"},Qh=["onClick"],Zh=["onClick"],ef={key:1},tf={class:"flex flex-col items-center justify-center py-12"},sf={key:0},rf={key:1},nf={class:"text-6xl mb-2"},of={class:"text-2xl font-bold uppercase"},af={key:2,class:"p-4 bg-gray-50 rounded-lg border border-gray-200"},lf={class:"bg-white p-6 rounded shadow-sm border"},cf={class:"flex gap-3"},uf=["disabled"],df={__name:"AdminPanel",props:["user"],emits:["logout","data-changed"],setup(t,{emit:e}){const s=t,r=Q("tickets"),n=Q(null),i=Q(!1),o=Q([]),a=Q(!1),l=Q(!1),c=Q(!1),u=Q("add"),d=Q(null),h=Q({type:"venta",date:14,price:0,zone:"",phone:"",seeks:"",offers:"",dia_busca:14,dia_ofrece:14}),p=Q(""),v=Q(""),b=Q(!1),w=Q("");async function A(){i.value=!0;const z=s.user.id,{data:P,error:V}=await be.from("perfiles").select("*").eq("id",z).single();P&&(n.value=P),i.value=!1}async function O(){if(!n.value)return;const z=!n.value.es_disponible,{error:P}=await be.from("perfiles").update({es_disponible:z}).eq("id",n.value.id);P||(n.value.es_disponible=z,J("data-changed"))}async function x(){const{data:z,error:P}=await be.from("info_dinamica").select("mensaje").eq("id",1).single();z&&(v.value=z.mensaje)}async function R(){b.value=!0,w.value="";const{error:z}=await be.from("info_dinamica").update({mensaje:v.value}).eq("id",1);z?w.value="Error: "+z.message:w.value="Palabra secreta actualizada correctamente.",b.value=!1}async function H(z=!0){z&&(a.value=!0);const{data:P}=await be.from("ventas").select("*").order("created_at",{ascending:!1}),{data:V}=await be.from("cambios").select("*").order("created_at",{ascending:!1}),ke=[...(P||[]).map(oe=>({...oe,type:"venta",table:"ventas"})),...(V||[]).map(oe=>({...oe,type:"cambio",table:"cambios"}))];o.value=ke.sort((oe,ee)=>new Date(ee.created_at)-new Date(oe.created_at)),z&&(a.value=!1)}function K(z){c.value=!0,u.value="edit",d.value=z.id,h.value={type:z.type,date:z.dia||14,price:z.precio||0,zone:z.zona||"",phone:z.tel||"",seeks:z.busca||"",offers:z.ofrece||"",dia_busca:z.dia_busca||14,dia_ofrece:z.dia_ofrece||14},p.value=""}const J=e;async function he(z){if(!confirm("Ests seguro de eliminar este ticket?"))return;const P=[...o.value];o.value=o.value.filter(ke=>ke.id!==z.id);const{error:V}=await be.from(z.table).delete().eq("id",z.id);V?(alert("Error al eliminar: "+V.message),o.value=P):(J("data-changed"),H())}function me(){c.value=!1,u.value="add",d.value=null,h.value={type:"venta",date:14,price:0,zone:"",phone:"",seeks:"",offers:"",dia_busca:14,dia_ofrece:14}}async function Ve(){if(l.value)return;l.value=!0,p.value="";let z=null,P=null;const V=u.value==="edit";let ke=h.value.type==="venta"?"ventas":"cambios";const oe=h.value.type==="venta"?{dia:h.value.date,zona:h.value.zone,precio:h.value.price,tel:h.value.phone}:{busca:h.value.seeks,dia_busca:h.value.dia_busca,ofrece:h.value.offers,dia_ofrece:h.value.dia_ofrece,tel:h.value.phone};if(u.value==="add"){const{data:ee,error:C}=await be.from(ke).insert([{...oe,created_at:new Date}]).select();z=C,P=ee}else{const{data:ee,error:C}=await be.from(ke).update(oe).eq("id",d.value).select();z=C,P=ee}if(z)p.value="Error: "+z.message;else{if(me(),p.value=V?"Ticket actualizado correctamente!":"Ticket agregado correctamente!",P&&P.length>0){const ee=ke==="ventas"?"venta":"cambio",C={...P[0],type:ee,table:ke};V?o.value=o.value.map(_=>_.id===C.id?C:_):o.value.unshift(C)}J("data-changed")}l.value=!1}function ot(){be.auth.signOut(),J("logout")}return Un(()=>{A(),H(),x(),be.channel("admin-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"ventas"},()=>H(!1)).on("postgres_changes",{event:"*",schema:"public",table:"cambios"},()=>H(!1)).subscribe()}),(z,P)=>(Y(),Z("div",Ch,[m("div",Ph,[m("h2",Ih,"Panel de Administracin ("+ne(t.user.email)+")",1),m("button",{onClick:ot,class:"text-sm text-red-600 hover:text-red-800 font-medium"},"Cerrar Sesin")]),m("div",$h,[m("button",{onClick:P[0]||(P[0]=V=>r.value="tickets"),class:Re(["pb-2 px-4 transition-colors",r.value==="tickets"?"border-b-2 border-indigo-600 text-indigo-600 font-bold":"text-gray-500 hover:text-gray-700"])},"Gestionar Tickets",2),m("button",{onClick:P[1]||(P[1]=V=>r.value="schedule"),class:Re(["pb-2 px-4 transition-colors",r.value==="schedule"?"border-b-2 border-indigo-600 text-indigo-600 font-bold":"text-gray-500 hover:text-gray-700"])},"Mi Estado",2),m("button",{onClick:P[2]||(P[2]=V=>r.value="config"),class:Re(["pb-2 px-4 transition-colors",r.value==="config"?"border-b-2 border-indigo-600 text-indigo-600 font-bold":"text-gray-500 hover:text-gray-700"])},"Configuracin",2)]),r.value==="tickets"?(Y(),Z("div",jh,[c.value?Ae("",!0):(Y(),Z("div",Uh,[m("button",{onClick:P[3]||(P[3]=V=>c.value=!0),class:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-indigo-700 transition"}," + Agregar Nuevo Ticket ")])),c.value?(Y(),Z("form",{key:1,onSubmit:sa(Ve,["prevent"]),class:"space-y-4 max-w-lg mx-auto mb-8 bg-gray-50 p-4 rounded-lg border border-gray-200"},[m("h3",Nh,ne(u.value==="add"?"Agregar Nuevo Ticket":"Editar Ticket"),1),m("div",null,[P[14]||(P[14]=m("label",{class:"block text-sm font-medium text-gray-700"},"Tipo",-1)),Se(m("select",{"onUpdate:modelValue":P[4]||(P[4]=V=>h.value.type=V),disabled:u.value==="edit",class:"w-full border border-gray-300 p-2 rounded"},[...P[13]||(P[13]=[m("option",{value:"venta"},"Venta",-1),m("option",{value:"cambio"},"Cambio",-1)])],8,Dh),[[Ss,h.value.type]])]),h.value.type==="venta"?(Y(),Z("div",Lh,[m("div",Bh,[m("div",null,[P[16]||(P[16]=m("label",{class:"block text-sm font-medium text-gray-700"},"Da",-1)),Se(m("select",{"onUpdate:modelValue":P[5]||(P[5]=V=>h.value.date=V),class:"w-full border border-gray-300 p-2 rounded"},[...P[15]||(P[15]=[m("option",{value:13},"13 Feb",-1),m("option",{value:14},"14 Feb",-1)])],512),[[Ss,h.value.date]])]),m("div",null,[P[17]||(P[17]=m("label",{class:"block text-sm font-medium text-gray-700"},"Precio",-1)),Se(m("input",{"onUpdate:modelValue":P[6]||(P[6]=V=>h.value.price=V),type:"number",min:"0",inputmode:"numeric",class:"w-full border border-gray-300 p-2 rounded"},null,512),[[Ge,h.value.price]])])]),m("div",null,[P[18]||(P[18]=m("label",{class:"block text-sm font-medium text-gray-700"},"Zona / Asiento",-1)),Se(m("input",{"onUpdate:modelValue":P[7]||(P[7]=V=>h.value.zone=V),type:"text",class:"w-full border border-gray-300 p-2 rounded",required:""},null,512),[[Ge,h.value.zone]])])])):(Y(),Z("div",Mh,[m("div",qh,[m("div",Fh,[P[19]||(P[19]=m("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Busca",-1)),Se(m("input",{"onUpdate:modelValue":P[8]||(P[8]=V=>h.value.seeks=V),type:"text",class:"w-full border p-2 rounded mb-2"},null,512),[[Ge,h.value.seeks]])]),m("div",Kh,[P[20]||(P[20]=m("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Ofrece",-1)),Se(m("input",{"onUpdate:modelValue":P[9]||(P[9]=V=>h.value.offers=V),type:"text",class:"w-full border p-2 rounded mb-2"},null,512),[[Ge,h.value.offers]])])])])),m("div",null,[P[21]||(P[21]=m("label",{class:"block text-sm font-medium text-gray-700"},"Telfono",-1)),Se(m("input",{"onUpdate:modelValue":P[10]||(P[10]=V=>h.value.phone=V),type:"tel",inputmode:"numeric",pattern:"[0-9]*",onInput:P[11]||(P[11]=V=>h.value.phone=h.value.phone.replace(/[^0-9]/g,"")),class:"w-full border border-gray-300 p-2 rounded",required:""},null,544),[[Ge,h.value.phone]])]),m("div",Vh,[m("button",{type:"button",onClick:me,class:"w-1/3 bg-gray-500 text-white py-2 rounded"},"Cancelar"),m("button",{type:"submit",disabled:l.value,class:Re(["flex-1 text-white py-2 rounded font-bold",l.value?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"])},ne(l.value?"Guardando...":u.value==="add"?"Guardar":"Actualizar"),11,Wh)]),p.value?(Y(),Z("p",{key:2,class:Re(["text-sm text-center mt-2 font-medium",p.value.includes("Error")?"text-red-500":"text-green-600"])},ne(p.value),3)):Ae("",!0)],32)):Ae("",!0),m("div",Hh,[P[22]||(P[22]=m("h3",{class:"font-bold text-lg text-gray-800 mb-4"},"Tickets Existentes",-1)),a.value?(Y(),Z("div",zh,"Cargando...")):(Y(),Z("div",Gh,[(Y(!0),Z(Le,null,tr(o.value,V=>(Y(),Z("div",{key:V.id,class:"flex justify-between items-center bg-gray-50 p-3 rounded border"},[m("div",null,[m("span",{class:Re(["text-xs px-2 py-0.5 rounded font-bold uppercase mr-2",V.type==="venta"?"bg-indigo-100 text-indigo-700":"bg-emerald-100 text-emerald-700"])},ne(V.type),3),m("span",Jh,ne(V.type==="venta"?V.zona:"Cambio"),1),m("span",Yh,"  "+ne(V.tel),1)]),m("div",Xh,[m("button",{onClick:ke=>K(V),class:"text-blue-600 hover:text-blue-800 text-xs font-bold uppercase"},"Editar",8,Qh),m("button",{onClick:ke=>he(V),class:"text-red-600 hover:text-red-800 text-xs font-bold uppercase"},"Borrar",8,Zh)])]))),128))]))])])):r.value==="schedule"?(Y(),Z("div",ef,[m("div",tf,[P[25]||(P[25]=m("h3",{class:"text-lg font-bold text-gray-700 mb-6"},"Mi Disponibilidad Actual",-1)),n.value?(Y(),Z("div",rf,[m("button",{onClick:O,class:Re(["w-48 h-48 rounded-full flex flex-col items-center justify-center transition-transform transform active:scale-95 shadow-xl border-8",n.value.es_disponible?"bg-green-500 border-green-300 text-white":"bg-red-500 border-red-300 text-white"])},[m("span",nf,ne(n.value.es_disponible?"":""),1),m("span",of,ne(n.value.es_disponible?"Disponible":"No Disponible"),1),P[24]||(P[24]=m("span",{class:"text-sm mt-2 opacity-80"},"(Clic para cambiar)",-1))],2)])):(Y(),Z("div",sf,[...P[23]||(P[23]=[m("p",{class:"text-gray-500 mb-4"},"No se encontr perfil de administrador.",-1)])]))])])):r.value==="config"?(Y(),Z("div",af,[P[28]||(P[28]=m("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Confguracin Global",-1)),m("div",lf,[P[26]||(P[26]=m("label",{class:"block text-sm font-bold text-indigo-900 mb-2"},"Palabra Secreta del Grupo",-1)),P[27]||(P[27]=m("p",{class:"text-xs text-gray-500 mb-4"},"Esta es la palabra que los usuarios deben ingresar para ver los nmeros de contacto.",-1)),m("div",cf,[Se(m("input",{"onUpdate:modelValue":P[12]||(P[12]=V=>v.value=V),type:"text",class:"flex-grow border p-3 rounded-lg focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500",placeholder:"Ej: FANT2026"},null,512),[[Ge,v.value]]),m("button",{onClick:R,disabled:b.value,class:"bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 disabled:opacity-50"},ne(b.value?"Guardando...":"Guardar"),9,uf)]),w.value?(Y(),Z("p",{key:0,class:Re(["mt-3 text-sm font-medium",w.value.includes("Error")?"text-red-500":"text-green-600"])},ne(w.value),3)):Ae("",!0)])])):Ae("",!0)]))}},hf={class:"bg-gray-50 min-h-screen font-sans flex flex-col"},ff={class:"bg-indigo-700 text-white p-6 sticky top-0 z-50 shadow-lg"},pf={class:"max-w-6xl mx-auto flex flex-col md:row justify-between items-center gap-4"},gf={class:"flex items-center gap-3"},mf=["src"],vf={class:"relative w-full md:w-1/2 flex gap-2"},bf={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4"},yf={class:"relative w-full max-w-md"},_f={key:1,class:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[70] p-4"},wf={class:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm text-center"},Sf={key:0,class:"text-red-500 text-sm mb-3 font-medium"},xf={key:2,class:"max-w-7xl mx-auto p-4 md:p-8 pb-0"},Ef={class:"max-w-7xl mx-auto p-4 md:p-8 flex-grow"},Tf={key:0,class:"mb-8 bg-blue-50 p-4 rounded-xl border border-blue-100 shadow-sm"},kf={class:"text-2xl"},Of={class:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-8 border-t border-blue-200 pt-4"},Af={class:"bg-white p-4 rounded-lg border border-gray-100 shadow-sm"},Rf={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Cf={class:"flex items-center gap-2"},Pf={class:"font-bold text-gray-700"},If={key:0,class:"text-center text-sm text-gray-400 mt-4"},$f={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8 bg-white p-6 rounded-xl shadow-sm border border-gray-100"},jf={key:1},Uf={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-12"},Nf={class:"flex justify-between items-start"},Df={class:"text-xs font-bold uppercase px-2 py-1 bg-indigo-100 text-indigo-700 rounded"},Lf={class:"text-lg font-bold text-gray-800"},Bf={class:"mt-2 font-semibold text-gray-700"},Mf={class:"text-sm text-gray-500 mt-2 font-mono"},qf=["onClick"],Ff={key:2},Kf={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Vf={class:"flex justify-between mb-2"},Wf={class:"text-xs font-bold uppercase px-2 py-1 bg-emerald-100 text-emerald-700 rounded"},Hf={class:"text-xs font-bold uppercase px-2 py-1 bg-blue-100 text-blue-700 rounded"},zf={class:"text-sm"},Gf={class:"text-red-600"},Jf={class:"text-sm"},Yf={class:"text-emerald-600"},Xf={class:"text-sm mt-3 pt-2 border-t font-mono"},Qf=["onClick"],Zf={__name:"App",setup(t){const e=Q({ventas:[],cambios:[]}),s=Q([]),r=Q(null),n=Q(!1),i=Q(""),o=Q(""),a=Q(!1),l=Q(""),c=Q([]),u=Q(null),d=Q(""),h=Q("todos"),p=Q("todos"),v=Q(""),b=Q("default"),w=Q(!1);async function A(){const{data:C,error:_}=await be.from("ventas").select("*");C&&(e.value.ventas=C),_&&console.error("Error loading ventas:",_);const{data:j,error:le}=await be.from("cambios").select("*").order("created_at",{ascending:!1});j&&(e.value.cambios=j),le&&console.error("Error loading cambios:",le);const{data:ye,error:is}=await be.from("perfiles").select("*").eq("es_admin",!0);ye&&(s.value=ye)}async function O(){const{data:C,error:_}=await be.from("info_dinamica").select("mensaje").eq("id",1).single();C&&(i.value=C.mensaje)}async function x(){const{data:C}=await be.auth.getUser();r.value=C.user}function R(C){r.value=C,n.value=!1,A()}function H(){r.value=null,c.value=[]}function K(C){return r.value?!0:c.value.includes(C)}function J(C){K(C.id)?window.open(ee(C.tel),"_blank"):(u.value=C.id,o.value="",l.value="",a.value=!0)}function he(){o.value.trim().toLowerCase()===i.value.trim().toLowerCase()?(u.value&&c.value.push(u.value),a.value=!1,l.value="",o.value="",u.value=null):l.value="Palabra incorrecta. Revisa el grupo de WhatsApp."}function me(){a.value=!1,o.value="",l.value="",u.value=null}function Ve(C){const _=e.value.ventas;if(C.eventType==="INSERT")_.unshift(C.new);else if(C.eventType==="UPDATE"){const j=_.findIndex(le=>le.id===C.new.id);j!==-1&&(_[j]=C.new)}else if(C.eventType==="DELETE"){const j=_.findIndex(le=>le.id===C.old.id);j!==-1&&_.splice(j,1)}}function ot(C){const _=e.value.cambios;if(C.eventType==="INSERT")_.unshift(C.new);else if(C.eventType==="UPDATE"){const j=_.findIndex(le=>le.id===C.new.id);j!==-1&&(_[j]=C.new)}else if(C.eventType==="DELETE"){const j=_.findIndex(le=>le.id===C.old.id);j!==-1&&_.splice(j,1)}}function z(C){if(C.eventType==="UPDATE"){const _=s.value.findIndex(j=>j.id===C.new.id);C.new.es_admin?_!==-1?s.value[_]=C.new:s.value.push(C.new):_!==-1&&s.value.splice(_,1)}}Un(()=>{A(),O(),x(),be.channel("public-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"ventas"},Ve).on("postgres_changes",{event:"*",schema:"public",table:"cambios"},ot).on("postgres_changes",{event:"*",schema:"public",table:"perfiles"},z).subscribe()});const P=ln(()=>{if(p.value!=="todos"&&p.value!=="venta")return[];let C=e.value.ventas.filter(_=>{const j=Object.values(_).some(is=>String(is).toLowerCase().includes(d.value.toLowerCase())),le=h.value==="todos"||_.dia==h.value,ye=!v.value||_.precio&&_.precio<=Number(v.value);return j&&le&&ye});return b.value==="asc"?C.sort((_,j)=>(Number(_.precio)||0)-(Number(j.precio)||0)):b.value==="desc"&&C.sort((_,j)=>(Number(j.precio)||0)-(Number(_.precio)||0)),C}),V=ln(()=>p.value!=="todos"&&p.value!=="cambio"?[]:e.value.cambios.filter(C=>{const _=Object.values(C).some(le=>String(le).toLowerCase().includes(d.value.toLowerCase())),j=h.value==="todos"||C.dia_busca==h.value||C.dia_ofrece==h.value;return _&&j}));function ke(){d.value="",h.value="todos",p.value="todos",v.value="",b.value="default"}function oe(C){if(!C)return"";const _=String(C);return _.length<4?"******":"******"+_.slice(-4)}function ee(C){const _=String(C).replace(/\s/g,""),j=`Hola, estoy interesado en tu boleto publicado en SafeTicket.

Para seguridad de ambos, sigamos la Dinmica de Seguridad SafeTicket:
1. El vendedor (t) entrega el boleto a un Admin para validacin.
2. Yo (comprador) te pago DIRECTAMENTE a ti.
3. El Admin me libera el boleto una vez confirmado el pago.

Puedes contactar a los Admins disponibles para iniciar el proceso aqu:
Admin Vane: 899 205 1168
Admin Crayola: 56 5740 3993
O en: ${window.location.origin}
(Revisa la seccin "Estatus de Admins")`;return`https://wa.me/52${_}?text=${encodeURIComponent(j)}`}return(C,_)=>(Y(),Z("div",hf,[m("nav",ff,[m("div",pf,[m("div",gf,[m("img",{src:bo(Th),alt:"SafeTicket Logo",class:"h-12 w-auto bg-white rounded-full p-1"},null,8,mf),_[9]||(_[9]=m("h1",{class:"text-2xl font-bold tracking-tight"},"SafeTicket MCRMX 2026",-1))]),m("div",vf,[Se(m("input",{type:"text","onUpdate:modelValue":_[0]||(_[0]=j=>d.value=j),placeholder:"Busca seccin, zona o telfono...",class:"w-full p-3 rounded-full text-gray-800 focus:outline-none focus:ring-4 focus:ring-indigo-300 shadow-inner"},null,512),[[Ge,d.value]]),r.value?Ae("",!0):(Y(),Z("button",{key:0,onClick:_[1]||(_[1]=j=>n.value=!0),class:"bg-indigo-900 px-4 rounded-full hover:bg-indigo-800 font-bold text-xs uppercase tracking-wide"}," Admin "))])])]),n.value?(Y(),Z("div",bf,[m("div",yf,[m("button",{onClick:_[2]||(_[2]=j=>n.value=!1),class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 font-bold bg-white rounded-full p-1 w-8 h-8 flex items-center justify-center shadow"},"X"),Ke(Rh,{onLoginSuccess:R})])])):Ae("",!0),a.value?(Y(),Z("div",_f,[m("div",wf,[_[10]||(_[10]=m("h3",{class:"text-2xl font-bold text-indigo-900 mb-2"}," Acceso Seguro",-1)),_[11]||(_[11]=m("p",{class:"text-gray-600 mb-4 text-sm"},"Ingresa la palabra secreta del grupo de WhatsApp para ver este contacto. ",-1)),Se(m("input",{"onUpdate:modelValue":_[3]||(_[3]=j=>o.value=j),onKeyup:qc(he,["enter"]),type:"text",placeholder:"Palabra Secreta...",class:"w-full p-3 border-2 border-indigo-100 rounded-lg text-center text-lg focus:border-indigo-500 focus:outline-none mb-2 upper"},null,544),[[Ge,o.value]]),l.value?(Y(),Z("p",Sf,ne(l.value),1)):Ae("",!0),m("div",{class:"flex gap-2"},[m("button",{onClick:me,class:"flex-1 py-2 text-gray-500 hover:bg-gray-100 rounded-lg font-medium"},"Cancelar"),m("button",{onClick:he,class:"flex-1 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 shadow-lg transition"},"Desbloquear")])])])):Ae("",!0),r.value?(Y(),Z("div",xf,[Ke(df,{user:r.value,onLogout:H,onDataChanged:A},null,8,["user"])])):Ae("",!0),m("main",Ef,[r.value?Ae("",!0):(Y(),Z("div",Tf,[m("button",{onClick:_[4]||(_[4]=j=>w.value=!w.value),class:"flex justify-between items-center w-full text-blue-900 font-bold text-lg hover:text-blue-700 transition"},[_[12]||(_[12]=m("span",{class:"flex items-center gap-2"}," Informacin Importante",-1)),m("span",kf,ne(w.value?"":"+"),1)]),Se(m("div",Of,[_[15]||(_[15]=ai('<div><h3 class="font-bold text-xl text-indigo-800 mb-2">Nuestra Dinmica de Seguridad</h3><div class="bg-white p-4 rounded-lg border border-gray-100 shadow-sm text-gray-700 space-y-3"><ul class="list-disc list-inside space-y-2"><li><strong class="text-indigo-700">Traspaso tico:</strong> Solo facilitamos el traspaso de boletos de personas que realmente no pueden asistir. No permitimos el lucro excesivo. </li><li><strong class="text-indigo-700">Precios Justos:</strong> Fomentamos precios transparentes y cercanos al costo original para apoyar a la comunidad de fans. </li></ul><div class="mt-4"><strong class="block text-indigo-800 mb-1 uppercase text-sm font-bold">Dinmica:</strong><ol class="list-decimal list-inside space-y-1 text-sm"><li>El vendedor nos entrega el boleto para su verificacin. Nosotros lo resguardamos para asegurar que sea vlido y nico.</li><li>Una vez validado el boleto.</li><li>Pedimos que el comprador haga el pago correspondiente <strong class="text-black">DIRECTAMENTE</strong> al vendedor.</li><li>Una vez confirmado el pago, liberamos el boleto al comprador.</li></ol></div><div class="pt-2 border-t border-gray-100 mt-2"><p class="text-sm"><strong class="text-indigo-700">Garanta de Entrega:</strong> Con esta dinmica, el comprador tiene la certeza de que recibir su acceso y el vendedor tiene su dinero. </p></div></div></div>',1)),m("div",null,[_[14]||(_[14]=m("h3",{class:"font-bold text-xl text-indigo-800 mb-2"},"Estatus de Admins",-1)),m("div",Af,[_[13]||(_[13]=m("p",{class:"text-xs text-gray-500 mb-3 text-center"},"Disponibilidad de los administradores para atenderte. ",-1)),m("div",Rf,[(Y(!0),Z(Le,null,tr(s.value,j=>(Y(),Z("div",{key:j.id,class:"flex items-center justify-between p-3 rounded-lg border bg-gray-50"},[m("div",Cf,[m("div",{class:Re(["w-3 h-3 rounded-full",j.es_disponible?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),m("span",Pf,ne(j.nombre||"Admin"),1)]),m("span",{class:Re(["text-xs font-bold px-2 py-1 rounded uppercase",j.es_disponible?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},ne(j.es_disponible?"Disponible":"Ocupado"),3)]))),128))]),s.value.length===0?(Y(),Z("div",If," No hay informacin de estatus disponible. ")):Ae("",!0)])])],512),[[xc,w.value]])])),m("div",$f,[m("div",null,[_[17]||(_[17]=m("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Da del Evento",-1)),Se(m("select",{"onUpdate:modelValue":_[5]||(_[5]=j=>h.value=j),class:"w-full p-2 border rounded-md"},[..._[16]||(_[16]=[m("option",{value:"todos"},"Todos los das",-1),m("option",{value:"13"},"13 de Febrero",-1),m("option",{value:"14"},"14 de Febrero",-1)])],512),[[Ss,h.value]])]),m("div",null,[_[19]||(_[19]=m("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Categora",-1)),Se(m("select",{"onUpdate:modelValue":_[6]||(_[6]=j=>p.value=j),class:"w-full p-2 border rounded-md"},[..._[18]||(_[18]=[m("option",{value:"todos"},"Venta y Cambios",-1),m("option",{value:"venta"},"Solo Venta",-1),m("option",{value:"cambio"},"Solo Cambios",-1)])],512),[[Ss,p.value]])]),m("div",null,[_[20]||(_[20]=m("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Precio Mximo",-1)),Se(m("input",{type:"number","onUpdate:modelValue":_[7]||(_[7]=j=>v.value=j),placeholder:"Ej: 3000",class:"w-full p-2 border rounded-md"},null,512),[[Ge,v.value]])]),m("div",null,[_[22]||(_[22]=m("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Ordenar",-1)),Se(m("select",{"onUpdate:modelValue":_[8]||(_[8]=j=>b.value=j),class:"w-full p-2 border rounded-md"},[..._[21]||(_[21]=[m("option",{value:"default"},"Default",-1),m("option",{value:"asc"},"Precio: Menor a Mayor",-1),m("option",{value:"desc"},"Precio: Mayor a Menor",-1)])],512),[[Ss,b.value]])]),m("div",{class:"flex items-end"},[m("button",{onClick:ke,class:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 rounded-md font-medium transition"}," Limpiar Filtros ")])]),P.value.length>0?(Y(),Z("div",jf,[_[23]||(_[23]=m("h2",{class:"text-xl font-bold mb-4 text-indigo-900 border-b-2 border-indigo-200 pb-2"},"Boletos en Venta",-1)),m("div",Uf,[(Y(!0),Z(Le,null,tr(P.value,(j,le)=>(Y(),Z("div",{key:"venta-"+le,class:"card bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-lg transition-transform transform hover:-translate-y-1"},[m("div",Nf,[m("span",Df,"Feb "+ne(j.dia),1),m("span",Lf,"$"+ne(j.precio),1)]),m("h3",Bf,ne(j.zona),1),m("p",Mf," "+ne(K(j.id)?j.tel:oe(j.tel)),1),m("button",{onClick:ye=>J(j),class:Re(["block w-full mt-3 text-center py-2 rounded text-sm font-bold transition",K(j.id)?"bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"])},ne(K(j.id)?" Contactar Vendedor":" Desbloquear Contacto"),11,qf)]))),128))])])):Ae("",!0),V.value.length>0?(Y(),Z("div",Ff,[_[28]||(_[28]=m("h2",{class:"text-xl font-bold mb-4 text-emerald-900 border-b-2 border-emerald-200 pb-2"},"Intercambios (Busca/Ofrece)",-1)),m("div",Kf,[(Y(!0),Z(Le,null,tr(V.value,(j,le)=>(Y(),Z("div",{key:"cambio-"+le,class:"card bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-lg transition-transform transform hover:-translate-y-1"},[m("div",Vf,[m("span",Wf,"Busca: Feb "+ne(j.dia_busca),1),m("span",Hf,"Ofrece: Feb "+ne(j.dia_ofrece),1)]),m("p",zf,[_[24]||(_[24]=m("strong",null,"Busca:",-1)),_[25]||(_[25]=on()),m("span",Gf,ne(j.busca),1)]),m("p",Jf,[_[26]||(_[26]=m("strong",null,"Ofrece:",-1)),_[27]||(_[27]=on()),m("span",Yf,ne(j.ofrece),1)]),m("p",Xf," "+ne(K(j.id)?j.tel:oe(j.tel)),1),m("button",{onClick:ye=>J(j),class:Re(["block w-full mt-3 text-center py-2 rounded text-sm font-bold transition",K(j.id)?"bg-emerald-50 text-emerald-600 hover:bg-emerald-600 hover:text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"])},ne(K(j.id)?" Contactar Vendedor":" Desbloquear Contacto"),11,Qf)]))),128))])])):Ae("",!0)]),_[29]||(_[29]=ai('<footer class="bg-gray-800 text-gray-400 py-8 px-4 mt-8"><div class="max-w-4xl mx-auto text-sm"><h4 class="text-white font-bold mb-4 uppercase">Aviso de Privacidad Simplificado</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><p class="mb-2"><strong class="text-gray-300">Finalidad:</strong> Los datos de contacto facilitados se utilizan exclusivamente para conectar a compradores y vendedores de boletos dentro de la dinmica de seguridad del grupo.</p><p class="mb-2"><strong class="text-gray-300">Confidencialidad:</strong> Garantizamos el resguardo de la informacin y no la compartimos con terceros ajenos a la transaccin.</p></div><div><p class="mb-2"><strong class="text-gray-300">Consentimiento:</strong> Al usar este sitio, aceptas que tu informacin de contacto sea visible para miembros verificados del grupo.</p><p class="mb-2"><strong class="text-gray-300">Intermediario:</strong> &quot;SafeTicket&quot; y sus administradores actan nicamente como intermediarios de confianza para validacin, no somos responsables finales del uso de los boletos.</p></div></div><p class="text-xs text-center mt-6 border-t border-gray-700 pt-4"> 2026 SafeTicket MCRMX. Todos los derechos reservados.</p></div></footer>',1))]))}};Vc(Zf).mount("#app");
